"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[256],{2256:(ue,v,g)=>{g.r(v),g.d(v,{VideogamesModule:()=>me});var p=g(6895),b=g(1334),s=g(433),r=g(7911),u=g(593),e=g(1571),f=g(726),T=g(1481),w=g(4961);function x(i,l){1&i&&(e.TgZ(0,"div",8),e._UZ(1,"i",9),e.TgZ(2,"span",10),e._uU(3,"Cargando mis videojuegos..."),e.qZA()())}const F=function(){return["/videogames/videogame"]};function I(i,l){if(1&i&&(e.TgZ(0,"c-col",11)(1,"c-card",12),e._UZ(2,"img",13),e.TgZ(3,"c-card-body")(4,"h5",14),e._uU(5),e.qZA(),e.TgZ(6,"c-row")(7,"c-col",15)(8,"button",16),e._uU(9,"Ver detalles"),e.qZA()()(),e.TgZ(10,"p",17)(11,"small",18),e._uU(12),e.qZA()()()()()),2&i){const t=l.$implicit;e.Q6J("sm",3),e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(3),e.Oqu(t.titulo),e.xp6(3),e.Q6J("routerLink",e.DdM(6,F))("state",t),e.xp6(4),e.hij("Por ",t.usuario,"")}}const q=function(){return["/videogames/post"]};let A=(()=>{class i{constructor(t,n,o){this.videogamesService=t,this.domSanitizer=n,this.usersService=o,this.videogames=new Array,this.showSpinner=!0,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1}ngOnInit(){this.usersService.getUser().subscribe({error:t=>{this.showSpinner=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.videogamesService.getVideogames(t.type,t.username).subscribe({error:n=>{this.modalMessage=n.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:n=>{this.showSpinner=!1,0==n.length&&(this.modalMessage="A\xfan no hay videojuegos publicados.",this.openCloseInfoModal()),n.forEach(o=>{var a=btoa(new Uint8Array(o.portada.data.data).reduce((c,d)=>c+String.fromCharCode(d),""));o.imagen=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+o.portada.tipoImagen+";base64, "+a)}),this.videogames=n}})}})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.l),e.Y36(T.H7),e.Y36(w.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-get-videogames"]],decls:15,vars:8,consts:[["class","fade show spinner",4,"ngIf"],[1,"row-cols-sm-2","row-cols-md-3","row-cols-lg-4"],[3,"sm",4,"ngFor","ngForOf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","dark",3,"routerLink"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[3,"sm"],[1,"mb-4"],["cCardImg","top","height","200",2,"object-fit","cover",3,"src"],["cCardTitle",""],[1,"text-end","mb-12"],["cButton","","color","dark","size","sm",1,"mb-4",3,"routerLink","state"],["cCardText",""],[1,"text-medium-emphasis"]],template:function(t,n){1&t&&(e.YNc(0,x,4,0,"div",0),e.TgZ(1,"c-row",1),e.YNc(2,I,13,7,"c-col",2),e.qZA(),e.TgZ(3,"c-modal",3),e.NdJ("visibleChange",function(a){return n.handleInfoModalChange(a)}),e.TgZ(4,"c-modal-header")(5,"h5",4),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.openCloseInfoModal()}),e.qZA()(),e.TgZ(8,"c-modal-body"),e._uU(9),e.qZA(),e.TgZ(10,"c-modal-footer")(11,"button",6),e._uU(12,"Publicar videojuego"),e.qZA(),e.TgZ(13,"button",7),e.NdJ("click",function(){return n.openCloseInfoModal()}),e._uU(14," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",n.showSpinner),e.xp6(2),e.Q6J("ngForOf",n.videogames),e.xp6(1),e.Q6J("visible",n.visible)("alignment","center"),e.xp6(3),e.Oqu(n.modalTitle),e.xp6(3),e.hij(" ",n.modalMessage," "),e.xp6(2),e.Q6J("routerLink",e.DdM(7,q)))},dependencies:[p.sg,p.O5,u.rH,r.AkF,r.yue,r.pce,r.PVT,r.qkm,r.iok,r.Yp0,r.Hq3,r.PFQ,r.KF4,r.YI7,r.Rbl,r.vPP,r.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}"]}),i})();var h=g(623),k=g(2340),V=g(529);let Z=(()=>{class i{constructor(t,n){this.http=t,this.router=n,this.apiUrl=k.N.apiUrl+"videogame-tag"}getVideogameTags(t){return this.http.get(`${this.apiUrl}/get/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(V.eN),e.LFG(u.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function U(i,l){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Editando videojuego..."),e.qZA()())}function M(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.id," - ",t.name," ")}}function J(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",37,38),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw(2);return e.KtG(a.addTag(o.value))}),e.YNc(2,M,2,2,"option",39),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.listOfTags)}}function y(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.id," - ",t.name," ")}}function S(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",40,38),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw(2);return e.KtG(a.addTag(o.value))}),e.YNc(2,y,2,2,"option",39),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.listOfTags)}}function Q(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.id," - ",t.name," ")}}function P(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",41,38),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw(2);return e.KtG(a.addTag(o.value))}),e.YNc(2,Q,2,2,"option",39),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.listOfTags)}}function N(i,l){1&i&&(e.TgZ(0,"label",42),e._uU(1,"Etiqueta v\xe1lida"),e.qZA())}function z(i,l){1&i&&(e.TgZ(0,"label",43),e._uU(1,"Ingrese m\xednimo una etiqueta"),e.qZA())}function E(i,l){if(1&i&&(e.TgZ(0,"button",45),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}function O(i,l){if(1&i&&(e.TgZ(0,"c-col",28),e.YNc(1,E,2,1,"button",44),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("sm",10),e.xp6(1),e.Q6J("ngForOf",t.tags)}}function Y(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Editar videojuego"),e.qZA(),e.TgZ(3,"form",9),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitVideogame())}),e.TgZ(4,"c-row")(5,"c-col",10)(6,"label",11),e._uU(7,"T\xedtulo"),e.qZA(),e._UZ(8,"input",12),e.TgZ(9,"c-form-feedback",13),e._uU(10,"T\xedtulo v\xe1lido"),e.qZA(),e.TgZ(11,"c-form-feedback",13),e._uU(12,"Ingrese el t\xedtulo del videojuego"),e.qZA()(),e.TgZ(13,"c-col",14)(14,"label",15),e._uU(15,"Portada"),e.qZA(),e.TgZ(16,"input",16),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onCoverFileChange(o))}),e.qZA(),e.TgZ(17,"c-form-feedback",13),e._uU(18,"Portada v\xe1lida"),e.qZA(),e.TgZ(19,"c-form-feedback",13),e._uU(20,"Ingrese la portada"),e.qZA()()(),e.TgZ(21,"c-row",17)(22,"c-col",10)(23,"label",18),e._uU(24,"Sinopsis"),e.qZA(),e._UZ(25,"textarea",19),e.TgZ(26,"c-form-feedback",13),e._uU(27,"Sinopsis v\xe1lida"),e.qZA(),e.TgZ(28,"c-form-feedback",13),e._uU(29,"Ingrese la sinopsis"),e.qZA()(),e.TgZ(30,"c-col",14)(31,"label",20),e._uU(32,"Archivo"),e.qZA(),e.TgZ(33,"input",21),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onZipFileChange(o))}),e.qZA(),e.TgZ(34,"c-form-feedback",13),e._uU(35,"Archivo v\xe1lido"),e.qZA(),e.TgZ(36,"c-form-feedback",13),e._uU(37,"Ingrese el archivo"),e.qZA()()(),e.TgZ(38,"c-row",17)(39,"c-col",14)(40,"label",22),e._uU(41,"Facebook"),e.qZA(),e.TgZ(42,"input",23),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onFacebookFileChange(o))}),e.qZA(),e.TgZ(43,"c-form-feedback",13),e._uU(44,"Archivo v\xe1lido"),e.qZA(),e.TgZ(45,"c-form-feedback",13),e._uU(46,"Ingrese el archivo"),e.qZA()(),e.TgZ(47,"c-col",14)(48,"label",24),e._uU(49,"Instagram"),e.qZA(),e.TgZ(50,"input",25),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onInstagramFileChange(o))}),e.qZA(),e.TgZ(51,"c-form-feedback",13),e._uU(52,"Archivo v\xe1lido"),e.qZA(),e.TgZ(53,"c-form-feedback",13),e._uU(54,"Ingrese el archivo"),e.qZA()(),e.TgZ(55,"c-col",14)(56,"label",26),e._uU(57,"Twitter"),e.qZA(),e.TgZ(58,"input",27),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onTwitterFileChange(o))}),e.qZA(),e.TgZ(59,"c-form-feedback",13),e._uU(60,"Archivo v\xe1lido"),e.qZA(),e.TgZ(61,"c-form-feedback",13),e._uU(62,"Ingrese el archivo"),e.qZA()()(),e.TgZ(63,"c-row",17)(64,"c-col",28)(65,"label",29),e._uU(66,"Tags"),e.qZA()(),e.TgZ(67,"c-col",28),e.YNc(68,J,3,1,"select",30),e.YNc(69,S,3,1,"select",31),e.YNc(70,P,3,1,"select",32),e.YNc(71,N,2,0,"label",33),e.YNc(72,z,2,0,"label",34),e.qZA(),e.YNc(73,O,2,2,"c-col",35),e.qZA(),e.TgZ(74,"c-row",17)(75,"c-col",14)(76,"button",36),e._uU(77,"Editar"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.getPutVideogameForm())("validated",t.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(3),e.Q6J("sm",2),e.xp6(3),e.Q6J("sm",10),e.xp6(1),e.Q6J("ngIf",0==t.validatedForm),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1==t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1!=t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1!=t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1==t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1!=t.tags.length||-1!=t.tags[0].id)}}let B=(()=>{class i{constructor(t,n,o,a,c){this.videogamesService=t,this.formBuilder=n,this.router=o,this.tagsService=a,this.videogameTagService=c,this.validatedForm=!1,this.listOfTags=[{id:-1,name:""}],this.tags=[{id:-1,name:""}],this.newVideogame={_id:"",titulo:"",usuario:"",sinopsis:"",bucketId:"",portada:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagen:"",tags:[],facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",zipFile:new File([],""),coverFile:new File([],""),facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}getPutVideogameForm(){return this.putVideogameForm}getTagInfo(t){let n=[{id:-1,name:""}];return this.videogameTagService.getVideogameTags(this.newVideogame._id).subscribe({error:o=>{this.error=!0,this.modalMessage=o.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:o=>{this.error=!1;for(const a of o){let c=t.find(d=>d.id===a);c&&1==n.length&&-1==n[0].id&&n.splice(n.findIndex(d=>-1===d.id),1),n.push(c)}return n}}),n}ngOnInit(){this.newVideogame._id=history.state._id,this.newVideogame.titulo=history.state.titulo,this.newVideogame.sinopsis=history.state.sinopsis,this.newVideogame.bucketId=history.state.bucketId,this.putVideogameForm=this.formBuilder.group({title:[this.newVideogame.titulo,s.kI.required],sinopsis:[this.newVideogame.sinopsis,s.kI.required],cover:["",s.kI.required],zip:["",s.kI.required],facebook:["",s.kI.required],instagram:["",s.kI.required],twitter:["",s.kI.required]}),this.tagsService.getTags().subscribe({error:t=>{this.error=!0,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.error=!1,this.listOfTags=t,this.tags=this.getTagInfo(t)}})}addTag(t){let n=parseInt(t.split(" - ")[0]),o=t.split(" - ")[1];this.tags.find(a=>a.id===n)?(1==this.tags.length&&-1!=this.tags[0].id&&this.tags.push({id:-1,name:""}),this.tags.splice(this.tags.findIndex(a=>a.id===n),1)):(1==this.tags.length&&-1==this.tags[0].id&&this.tags.splice(this.tags.findIndex(a=>-1===a.id),1),this.tags.push({id:n,name:o}))}onZipFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.zipFile=o)}onCoverFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.coverFile=o)}onFacebookFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.facebookFile=o)}onInstagramFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.instaFile=o)}onTwitterFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.twitterFile=o)}onPutVideogame(){this.newVideogame.titulo=this.putVideogameForm.value.title,this.newVideogame.sinopsis=this.putVideogameForm.value.sinopsis,this.newVideogame.tags=this.tags.map(({id:t})=>t),this.showSpinner=!0,this.videogamesService.putVideogame(this.newVideogame).subscribe({error:t=>{this.error=!0,this.showSpinner=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.error=!1,this.showSpinner=!1,this.modalMessage=t.replace(/['"]+/g,""),this.openCloseInfoModal(!0)}})}isValidForm(){return""!=this.putVideogameForm.value.title||""!=this.putVideogameForm.value.sinopsis||""!=this.putVideogameForm.value.developer||1!=this.tags.length||-1!=this.tags[0].id}submitVideogame(){this.validatedForm=!0,this.isValidForm()&&this.onPutVideogame()}openCloseInfoModal(t){this.visible=!this.visible,t?this.visible&&t&&this.resetForm():this.completeForm(),!this.visible&&!this.error&&this.router.navigate(["/videogames"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.putVideogameForm=this.formBuilder.group({title:["",s.kI.required],sinopsis:["",s.kI.required],cover:["",s.kI.required],zip:["",s.kI.required],facebook:["",s.kI.required],instagram:["",s.kI.required],twitter:["",s.kI.required]})}completeForm(){this.validatedForm=!1,this.putVideogameForm=this.formBuilder.group({title:[this.newVideogame.titulo,s.kI.required],sinopsis:[this.newVideogame.sinopsis,s.kI.required],cover:["",s.kI.required],zip:["",s.kI.required],facebook:["",s.kI.required],instagram:["",s.kI.required],twitter:["",s.kI.required]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.l),e.Y36(s.qu),e.Y36(u.F0),e.Y36(h.i),e.Y36(Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-update-videogame"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","8"],["cLabel","","for","title"],["cFormControl","","id","title","formControlName","title","required","","type","text"],[3,"valid"],["md","4"],["cLabel","","for","cover"],["cFormControl","","id","cover","formControlName","cover","accept","image/png, image/jpeg","type","file",3,"change"],[1,"row"],["cLabel","","for","sinopsis"],["cFormControl","","id","sinopsis","formControlName","sinopsis","required","","type","text"],["cLabel","","for","zip"],["cFormControl","","id","zip","formControlName","zip","type","file","value","","accept","application/zip",3,"change"],["cLabel","","for","facebook"],["cFormControl","","id","facebook","formControlName","facebook","accept","image/png, image/jpeg","type","file",3,"change"],["cLabel","","for","instagram"],["cFormControl","","id","instagram","formControlName","instagram","accept","image/png, image/jpeg","type","file",3,"change"],["cLabel","","for","twitter"],["cFormControl","","id","twitter","formControlName","twitter","accept","image/png, image/jpeg","type","file",3,"change"],[1,"columns-tags",3,"sm"],["cLabel",""],["cSelect","","size","3","sizing","md","class","tag-picker",3,"change",4,"ngIf"],["cSelect","","size","3","sizing","md","style","border: 1px solid #e55353;",3,"change",4,"ngIf"],["cSelect","","size","3","sizing","md","style","border: 1px solid #2eb85c;",3,"change",4,"ngIf"],["style","margin-top: 0.25rem; font-size: 0.875em; color: #2eb85c;",4,"ngIf"],["style","margin-top: 0.25rem; font-size: 0.875em; color: #e55353;",4,"ngIf"],["class","columns-tags",3,"sm",4,"ngIf"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"],["cSelect","","size","3","sizing","md",1,"tag-picker",3,"change"],["selectTags",""],[4,"ngFor","ngForOf"],["cSelect","","size","3","sizing","md",2,"border","1px solid #e55353",3,"change"],["cSelect","","size","3","sizing","md",2,"border","1px solid #2eb85c",3,"change"],[2,"margin-top","0.25rem","font-size","0.875em","color","#2eb85c"],[2,"margin-top","0.25rem","font-size","0.875em","color","#e55353"],["cButton","","color","light","shape","rounded-pill","class","tag","disabled","",4,"ngFor","ngForOf"],["cButton","","color","light","shape","rounded-pill","disabled","",1,"tag"]],template:function(t,n){1&t&&(e.YNc(0,U,4,0,"div",0),e.YNc(1,Y,78,24,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(a){return n.handleInfoModalChange(a)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.openCloseInfoModal(!1)}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return n.openCloseInfoModal(!1)}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",n.showSpinner),e.xp6(1),e.Q6J("ngIf",0==n.showSpinner),e.xp6(1),e.Q6J("visible",n.visible)("alignment","center"),e.xp6(3),e.Oqu(n.modalTitle),e.xp6(3),e.hij(" ",n.modalMessage," "))},dependencies:[p.sg,p.O5,r.iok,r.Yp0,r.$_X,r.oHf,r.dCl,r.eFW,r.nqR,r.Hq3,r.PFQ,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,r.KF4,r.YI7,r.Rbl,r.vPP,r.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}.columns-tags[_ngcontent-%COMP%]{margin-top:2%;margin-bottom:3%}.tag[_ngcontent-%COMP%]{margin-right:1%}.tag-picker[_ngcontent-%COMP%]{border:1px solid #b1b7c1}"]}),i})();function C(i,l,t,n,o,a,c){try{var d=i[a](c),m=d.value}catch(pe){return void t(pe)}d.done?l(m):Promise.resolve(m).then(n,o)}function G(i,l){if(1&i&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.spinnerMessage)}}function H(i,l){if(1&i&&(e.TgZ(0,"button",28),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}const L=function(){return["/videogames/update"]};function D(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"c-row",10)(2,"c-col",11),e._UZ(3,"img",12),e.qZA(),e.TgZ(4,"c-col",13)(5,"c-row")(6,"h1"),e._uU(7),e.qZA()(),e.TgZ(8,"c-row")(9,"h5"),e._uU(10),e.qZA()(),e.TgZ(11,"c-row",14)(12,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.downloadFile())}),e.O4$(),e._UZ(13,"svg",16),e._uU(14,"Descargar .zip"),e.qZA()(),e.kcU(),e.TgZ(15,"c-row",17)(16,"button",18),e.O4$(),e._UZ(17,"svg",19),e._uU(18,"Editar"),e.qZA(),e.kcU(),e.TgZ(19,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDeleteModal())}),e.O4$(),e._UZ(20,"svg",21),e._uU(21,"Eliminar"),e.qZA()()()(),e.kcU(),e.TgZ(22,"c-row",22)(23,"c-col",11)(24,"h5"),e._uU(25,"Tags"),e.qZA()(),e.TgZ(26,"c-col",11),e.YNc(27,H,2,1,"button",23),e.qZA()(),e.TgZ(28,"c-row",22)(29,"h5"),e._uU(30,"Sinopsis"),e.qZA()(),e.TgZ(31,"c-row",24)(32,"c-col",11)(33,"p"),e._uU(34),e.qZA()()(),e.TgZ(35,"c-row",22)(36,"h5"),e._uU(37,"Redes sociales de desarrolladores"),e.qZA()(),e.TgZ(38,"c-row",25)(39,"c-col",11)(40,"c-row",26)(41,"h6"),e._uU(42,"Facebook"),e.qZA()(),e.TgZ(43,"c-row"),e._UZ(44,"img",27),e.qZA()(),e.TgZ(45,"c-col",11)(46,"c-row",26)(47,"h6"),e._uU(48,"Instagram"),e.qZA()(),e.TgZ(49,"c-row"),e._UZ(50,"img",27),e.qZA()(),e.TgZ(51,"c-col",11)(52,"c-row",26)(53,"h6"),e._uU(54,"Twitter"),e.qZA()(),e.TgZ(55,"c-row"),e._UZ(56,"img",27),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("sm",4),e.xp6(1),e.Q6J("src",t.videogame.imagen,e.LSH),e.xp6(1),e.Q6J("sm",8),e.xp6(3),e.Oqu(t.videogame.titulo),e.xp6(3),e.hij("Publicado por ",t.videogame.usuario,""),e.xp6(6),e.Q6J("routerLink",e.DdM(18,L))("state",t.videogame),e.xp6(7),e.Q6J("sm",2),e.xp6(3),e.Q6J("sm",10),e.xp6(1),e.Q6J("ngForOf",t.videogameTags),e.xp6(5),e.Q6J("sm",10),e.xp6(2),e.Oqu(t.videogame.sinopsis),e.xp6(5),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.videogame.imagenFacebook,e.LSH),e.xp6(1),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.videogame.imagenInstagram,e.LSH),e.xp6(1),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.videogame.imagenTwitter,e.LSH)}}function K(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDeleteVideogame())}),e._uU(1,"Eliminar"),e.qZA()}}let R=(()=>{class i{constructor(t,n,o,a,c){this.domSanitizer=t,this.router=n,this.videogamesService=o,this.tagsService=a,this.videogameTagService=c,this.excalinestDownloadsPath="C:\\Excalinest\\",this.deleteButton=!1,this.videogameTags=[{id:-1,name:""}],this.spinnerMessage="Cargando videojuego...",this.videogame={_id:"",titulo:"",usuario:"",sinopsis:"",bucketId:"",portada:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagen:"",tags:[],facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",zipFile:new File([],""),coverFile:new File([],""),facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}getTagInfo(t){let n=[{id:-1,name:""}];return this.videogameTagService.getVideogameTags(this.videogame._id).subscribe({error:o=>{this.error=!0,this.modalMessage=o.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:o=>{this.error=!1;for(const a of o){let c=t.find(d=>d.id===a);c&&1==n.length&&-1==n[0].id&&n.splice(n.findIndex(d=>-1===d.id),1),n.push(c)}return n}}),n}ngOnInit(){this.videogame=history.state,this.tagsService.getTags().subscribe({error:c=>{this.error=!0,this.modalMessage=c.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:c=>{this.error=!1,this.videogameTags=this.getTagInfo(c)}});var t=btoa(new Uint8Array(this.videogame.portada.data.data).reduce((c,d)=>c+String.fromCharCode(d),""));this.videogame.imagen=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.videogame.portada.tipoImagen+";base64, "+t);var n=btoa(new Uint8Array(this.videogame.facebook.data.data).reduce((c,d)=>c+String.fromCharCode(d),""));this.videogame.imagenFacebook=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.videogame.facebook.tipoImagen+";base64, "+n);var o=btoa(new Uint8Array(this.videogame.instagram.data.data).reduce((c,d)=>c+String.fromCharCode(d),""));this.videogame.imagenInstagram=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.videogame.instagram.tipoImagen+";base64, "+o);var a=btoa(new Uint8Array(this.videogame.twitter.data.data).reduce((c,d)=>c+String.fromCharCode(d),""));this.videogame.imagenTwitter=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.videogame.twitter.tipoImagen+";base64, "+a)}showDeleteModal(){this.deleteButton=!0,this.modalMessage="\xbfEst\xe1 seguro de eliminar "+this.videogame.titulo+"?",this.openCloseInfoModal()}onDeleteVideogame(){this.openCloseInfoModal(),this.showSpinner=!0,this.spinnerMessage="Eliminando videojuego...",this.videogamesService.deleteVideogame({_id:this.videogame._id}).subscribe({error:t=>{this.showSpinner=!1,this.deleteButton=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.router.navigate(["/videogames"])}})}downloadFile(){var t=this;let n={filename:this.videogame.titulo+".zip"};var o;this.showSpinner=!0,this.spinnerMessage="Descargando videojuego...",this.videogamesService.getZipFile(n).subscribe({error:o=>{this.showSpinner=!1,this.deleteButton=!1,this.modalMessage=o.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:(o=function j(i){return function(){var l=this,t=arguments;return new Promise(function(n,o){var a=i.apply(l,t);function c(m){C(a,n,o,c,d,"next",m)}function d(m){C(a,n,o,c,d,"throw",m)}c(void 0)})}}(function*(a){t.showSpinner=!1;const c=t.videogame.titulo+".zip",d=window.URL.createObjectURL(a),m=document.createElement("a");m.href=d,m.download=c,m.click(),window.URL.revokeObjectURL(d),t.deleteButton=!1}),function(c){return o.apply(this,arguments)})})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.H7),e.Y36(u.F0),e.Y36(f.l),e.Y36(h.i),e.Y36(Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-videogame-detail"]],decls:13,vars:7,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","danger",3,"click",4,"ngIf"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[1,"row-1"],[3,"sm"],["cCardImg","top",1,"w-75","p-3","rounded","mx-auto","d-block",3,"src"],[1,"col-title",3,"sm"],[1,"col-download-button"],["cButton","","color","dark",1,"download-button",3,"click"],["cIcon","","name","cilCloudDownload",1,"me-2","icon"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","crud-buttons"],["cButton","","color","info","size","sm",1,"crud-button",3,"routerLink","state"],["cIcon","","name","cilPencil",1,"me-2","icon"],["cButton","","color","danger","size","sm",1,"crud-button",3,"click"],["cIcon","","name","cilTrash",1,"me-2","icon"],[1,"row-title"],["cButton","","color","light","shape","rounded-pill","class","tag","disabled","",4,"ngFor","ngForOf"],[1,"justify-content-center","row-1"],[1,"row-social-net"],[1,"text-center"],["cCardImg","top",1,"w-50","p-3","rounded","mx-auto","d-block",3,"src"],["cButton","","color","light","shape","rounded-pill","disabled","",1,"tag"],["cButton","","color","danger",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,G,4,1,"div",0),e.YNc(1,D,57,19,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(a){return n.handleInfoModalChange(a)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.openCloseInfoModal()}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer"),e.YNc(10,K,2,0,"button",5),e.TgZ(11,"button",6),e.NdJ("click",function(){return n.openCloseInfoModal()}),e._uU(12," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",n.showSpinner),e.xp6(1),e.Q6J("ngIf",0==n.showSpinner),e.xp6(1),e.Q6J("visible",n.visible)("alignment","center"),e.xp6(3),e.Oqu(n.modalTitle),e.xp6(3),e.hij(" ",n.modalMessage," "),e.xp6(2),e.Q6J("ngIf",n.deleteButton))},dependencies:[p.sg,p.O5,u.rH,r.pce,r.iok,r.Yp0,b.ar,r.Hq3,r.PFQ,r.KF4,r.YI7,r.Rbl,r.vPP,r.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.row-1[_ngcontent-%COMP%]{margin-top:3%}.col-title[_ngcontent-%COMP%]{padding-top:5%;padding-bottom:5%}.col-download-button[_ngcontent-%COMP%]{margin-top:5%}.download-button[_ngcontent-%COMP%]{max-width:150px;margin-left:1%}.crud-buttons[_ngcontent-%COMP%]{margin-top:4%;margin-right:10%}.crud-button[_ngcontent-%COMP%]{max-width:150px;margin-left:1%}.row-title[_ngcontent-%COMP%]{margin-left:4%;margin-top:3%}.row-social-net[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:10%}.tag[_ngcontent-%COMP%]{margin-right:1%}"]}),i})();function $(i,l){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Publicando videojuego..."),e.qZA()())}function X(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.id," - ",t.name," ")}}function W(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",37,38),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw(2);return e.KtG(a.addTag(o.value))}),e.YNc(2,X,2,2,"option",39),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.listOfTags)}}function ee(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.id," - ",t.name," ")}}function te(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",40,38),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw(2);return e.KtG(a.addTag(o.value))}),e.YNc(2,ee,2,2,"option",39),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.listOfTags)}}function ie(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.id," - ",t.name," ")}}function oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",41,38),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw(2);return e.KtG(a.addTag(o.value))}),e.YNc(2,ie,2,2,"option",39),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.listOfTags)}}function ne(i,l){1&i&&(e.TgZ(0,"label",42),e._uU(1,"Etiqueta v\xe1lida"),e.qZA())}function ae(i,l){1&i&&(e.TgZ(0,"label",43),e._uU(1,"Ingrese m\xednimo una etiqueta"),e.qZA())}function se(i,l){if(1&i&&(e.TgZ(0,"button",45),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}function re(i,l){if(1&i&&(e.TgZ(0,"c-col",28),e.YNc(1,se,2,1,"button",44),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("sm",10),e.xp6(1),e.Q6J("ngForOf",t.tags)}}function le(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Publicar videojuego"),e.qZA(),e.TgZ(3,"form",9),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitVideogame())}),e.TgZ(4,"c-row")(5,"c-col",10)(6,"label",11),e._uU(7,"T\xedtulo"),e.qZA(),e._UZ(8,"input",12),e.TgZ(9,"c-form-feedback",13),e._uU(10,"T\xedtulo v\xe1lido"),e.qZA(),e.TgZ(11,"c-form-feedback",13),e._uU(12,"Ingrese el t\xedtulo del videojuego"),e.qZA()(),e.TgZ(13,"c-col",14)(14,"label",15),e._uU(15,"Portada"),e.qZA(),e.TgZ(16,"input",16),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onCoverFileChange(o))}),e.qZA(),e.TgZ(17,"c-form-feedback",13),e._uU(18,"Portada v\xe1lida"),e.qZA(),e.TgZ(19,"c-form-feedback",13),e._uU(20,"Ingrese la portada"),e.qZA()()(),e.TgZ(21,"c-row",17)(22,"c-col",10)(23,"label",18),e._uU(24,"Sinopsis"),e.qZA(),e._UZ(25,"textarea",19),e.TgZ(26,"c-form-feedback",13),e._uU(27,"Sinopsis v\xe1lida"),e.qZA(),e.TgZ(28,"c-form-feedback",13),e._uU(29,"Ingrese la sinopsis"),e.qZA()(),e.TgZ(30,"c-col",14)(31,"label",20),e._uU(32,"Archivo"),e.qZA(),e.TgZ(33,"input",21),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onZipFileChange(o))}),e.qZA(),e.TgZ(34,"c-form-feedback",13),e._uU(35,"Archivo v\xe1lido"),e.qZA(),e.TgZ(36,"c-form-feedback",13),e._uU(37,"Ingrese el archivo"),e.qZA()()(),e.TgZ(38,"c-row",17)(39,"c-col",14)(40,"label",22),e._uU(41,"Facebook"),e.qZA(),e.TgZ(42,"input",23),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onFacebookFileChange(o))}),e.qZA(),e.TgZ(43,"c-form-feedback",13),e._uU(44,"Archivo v\xe1lido"),e.qZA(),e.TgZ(45,"c-form-feedback",13),e._uU(46,"Ingrese el archivo"),e.qZA()(),e.TgZ(47,"c-col",14)(48,"label",24),e._uU(49,"Instagram"),e.qZA(),e.TgZ(50,"input",25),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onInstagramFileChange(o))}),e.qZA(),e.TgZ(51,"c-form-feedback",13),e._uU(52,"Archivo v\xe1lido"),e.qZA(),e.TgZ(53,"c-form-feedback",13),e._uU(54,"Ingrese el archivo"),e.qZA()(),e.TgZ(55,"c-col",14)(56,"label",26),e._uU(57,"Twitter"),e.qZA(),e.TgZ(58,"input",27),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onTwitterFileChange(o))}),e.qZA(),e.TgZ(59,"c-form-feedback",13),e._uU(60,"Archivo v\xe1lido"),e.qZA(),e.TgZ(61,"c-form-feedback",13),e._uU(62,"Ingrese el archivo"),e.qZA()()(),e.TgZ(63,"c-row",17)(64,"c-col",28)(65,"label",29),e._uU(66,"Tags"),e.qZA()(),e.TgZ(67,"c-col",28),e.YNc(68,W,3,1,"select",30),e.YNc(69,te,3,1,"select",31),e.YNc(70,oe,3,1,"select",32),e.YNc(71,ne,2,0,"label",33),e.YNc(72,ae,2,0,"label",34),e.qZA(),e.YNc(73,re,2,2,"c-col",35),e.qZA(),e.TgZ(74,"c-row",17)(75,"c-col",14)(76,"button",36),e._uU(77," Publicar "),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.getPostVideogameForm())("validated",t.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(3),e.Q6J("sm",2),e.xp6(3),e.Q6J("sm",10),e.xp6(1),e.Q6J("ngIf",0==t.validatedForm),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1==t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1!=t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1!=t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1==t.validatedForm&&-1==t.tags[0].id),e.xp6(1),e.Q6J("ngIf",1!=t.tags.length||-1!=t.tags[0].id)}}let ce=(()=>{class i{constructor(t,n,o,a){this.videogamesService=t,this.formBuilder=n,this.router=o,this.tagsService=a,this.validatedForm=!1,this.listOfTags=[{id:-1,name:""}],this.tags=[{id:-1,name:""}],this.newVideogame={_id:"",titulo:"",usuario:"",sinopsis:"",bucketId:"",portada:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagen:"",tags:[],facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",zipFile:new File([],""),coverFile:new File([],""),facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}getPostVideogameForm(){return this.postVideogameForm}ngOnInit(){this.postVideogameForm=this.formBuilder.group({title:["",s.kI.required],sinopsis:["",s.kI.required],cover:["",s.kI.required],zip:["",s.kI.required],facebook:["",s.kI.required],instagram:["",s.kI.required],twitter:["",s.kI.required]}),this.tagsService.getTags().subscribe({error:t=>{this.error=!0,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.error=!1,this.listOfTags=t}})}addTag(t){let n=parseInt(t.split(" - ")[0]),o=t.split(" - ")[1];this.tags.find(a=>a.id===n)?(1==this.tags.length&&-1!=this.tags[0].id&&this.tags.push({id:-1,name:""}),this.tags.splice(this.tags.findIndex(a=>a.id===n),1)):(1==this.tags.length&&-1==this.tags[0].id&&this.tags.splice(this.tags.findIndex(a=>-1===a.id),1),this.tags.push({id:n,name:o}))}playAudio(){let t=new Audio;t.src="../../../../assets/audio/success.mp3",t.load(),t.play()}onZipFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.zipFile=o)}onCoverFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.coverFile=o)}onFacebookFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.facebookFile=o)}onInstagramFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.instaFile=o)}onTwitterFileChange(t){const o=t.target.files?.[0];o&&(this.newVideogame.twitterFile=o)}onPostVideogame(){this.newVideogame.titulo=this.postVideogameForm.value.title,this.newVideogame.sinopsis=this.postVideogameForm.value.sinopsis,this.newVideogame.tags=this.tags.map(({id:t})=>t),this.showSpinner=!0,this.videogamesService.postVideogame(this.newVideogame).subscribe({error:t=>{this.showSpinner=!1,this.error=!0,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.playAudio(),this.showSpinner=!1,this.error=!1,this.modalMessage=t.replace(/['"]+/g,""),this.openCloseInfoModal(!0)}})}submitVideogame(){this.validatedForm=!0,this.postVideogameForm.dirty&&this.postVideogameForm.valid&&(1!=this.tags.length||-1!=this.tags[0].id)&&this.onPostVideogame()}openCloseInfoModal(t){this.visible=!this.visible,t?this.visible&&t&&this.resetForm():this.completeForm(),!this.visible&&!this.error&&this.router.navigate(["/videogames"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.postVideogameForm=this.formBuilder.group({title:["",s.kI.required],sinopsis:["",s.kI.required],cover:["",s.kI.required],zip:["",s.kI.required],facebook:["",s.kI.required],instagram:["",s.kI.required],twitter:["",s.kI.required]})}completeForm(){this.validatedForm=!1,this.postVideogameForm=this.formBuilder.group({title:[this.newVideogame.titulo,s.kI.required],sinopsis:[this.newVideogame.sinopsis,s.kI.required],cover:["",s.kI.required],zip:["",s.kI.required],facebook:["",s.kI.required],instagram:["",s.kI.required],twitter:["",s.kI.required]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.l),e.Y36(s.qu),e.Y36(u.F0),e.Y36(h.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-post-videogame"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","8"],["cLabel","","for","title"],["cFormControl","","id","title","formControlName","title","required","","type","text"],[3,"valid"],["md","4"],["cLabel","","for","cover"],["cFormControl","","id","cover","formControlName","cover","accept","image/png, image/jpeg","required","","type","file",3,"change"],[1,"row"],["cLabel","","for","sinopsis"],["cFormControl","","id","sinopsis","formControlName","sinopsis","required","","type","text"],["cLabel","","for","zip"],["cFormControl","","id","zip","formControlName","zip","accept","application/zip","required","","type","file",3,"change"],["cLabel","","for","facebook"],["cFormControl","","id","facebook","formControlName","facebook","accept","image/png, image/jpeg","required","","type","file",3,"change"],["cLabel","","for","instagram"],["cFormControl","","id","instagram","formControlName","instagram","accept","image/png, image/jpeg","required","","type","file",3,"change"],["cLabel","","for","twitter"],["cFormControl","","id","twitter","formControlName","twitter","accept","image/png, image/jpeg","required","","type","file",3,"change"],[1,"columns-tags",3,"sm"],["cLabel",""],["cSelect","","size","3","sizing","md","class","tag-picker",3,"change",4,"ngIf"],["cSelect","","size","3","sizing","md","style","border: 1px solid #e55353;",3,"change",4,"ngIf"],["cSelect","","size","3","sizing","md","style","border: 1px solid #2eb85c;",3,"change",4,"ngIf"],["style","margin-top: 0.25rem; font-size: 0.875em; color: #2eb85c;",4,"ngIf"],["style","margin-top: 0.25rem; font-size: 0.875em; color: #e55353;",4,"ngIf"],["class","columns-tags",3,"sm",4,"ngIf"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"],["cSelect","","size","3","sizing","md",1,"tag-picker",3,"change"],["selectTags",""],[4,"ngFor","ngForOf"],["cSelect","","size","3","sizing","md",2,"border","1px solid #e55353",3,"change"],["cSelect","","size","3","sizing","md",2,"border","1px solid #2eb85c",3,"change"],[2,"margin-top","0.25rem","font-size","0.875em","color","#2eb85c"],[2,"margin-top","0.25rem","font-size","0.875em","color","#e55353"],["cButton","","color","light","shape","rounded-pill","class","tag","disabled","",4,"ngFor","ngForOf"],["cButton","","color","light","shape","rounded-pill","disabled","",1,"tag"]],template:function(t,n){1&t&&(e.YNc(0,$,4,0,"div",0),e.YNc(1,le,78,24,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(a){return n.handleInfoModalChange(a)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.openCloseInfoModal(!1)}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return n.openCloseInfoModal(!1)}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",n.showSpinner),e.xp6(1),e.Q6J("ngIf",0==n.showSpinner),e.xp6(1),e.Q6J("visible",n.visible)("alignment","center"),e.xp6(3),e.Oqu(n.modalTitle),e.xp6(3),e.hij(" ",n.modalMessage," "))},dependencies:[p.sg,p.O5,r.iok,r.Yp0,r.$_X,r.oHf,r.dCl,r.eFW,r.nqR,r.Hq3,r.PFQ,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,r.KF4,r.YI7,r.Rbl,r.vPP,r.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}.columns-tags[_ngcontent-%COMP%]{margin-top:2%;margin-bottom:3%}.tag[_ngcontent-%COMP%]{margin-right:1%}.tag-picker[_ngcontent-%COMP%]{border:1px solid #b1b7c1}"]}),i})();var _=g(2993);const de=[{path:"",redirectTo:"get",pathMatch:"full"},{path:"",data:{title:"Videojuegos"},children:[{path:"",pathMatch:"full",redirectTo:"colors"},{path:"update",component:B,data:{title:"Editar videojuego",usuario:"desarrollador"},canActivate:[_.a]},{path:"get",component:A,data:{title:"Mis videojuegos",usuario:"desarrollador"},canActivate:[_.a]},{path:"post",component:ce,data:{title:"Publicar videojuego",usuario:"desarrollador"},canActivate:[_.a]},{path:"videogame",component:R,data:{title:"Detalles del videojuego",usuario:"desarrollador"},canActivate:[_.a]}]}];let ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(de),u.Bz]}),i})(),me=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,ge,r.dTQ,r.zE6,r.gzQ,b.QX,r.dGk,r.P4_,r.ejP,r.hJ1,s.u5,s.UX,r.ga2,r.kWm,r.m81,r.Xo8,r.zkK]}),i})()}}]);
"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[484],{8484:(oe,U,u)=>{u.r(U),u.d(U,{UsersModule:()=>ee});var d=u(6895),f=u(1334),n=u(433),a=u(7911),p=u(593),e=u(1571),g=u(4961);function w(i,l){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Editando usuario..."),e.qZA()())}function C(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Editar usuario"),e.qZA(),e.TgZ(3,"form",9),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submitUser())}),e.TgZ(4,"c-row")(5,"c-col",10)(6,"label",11),e._uU(7,"Nombre de usuario"),e.qZA(),e._UZ(8,"input",12),e.TgZ(9,"c-form-feedback",13),e._uU(10,"Nombre de usuario v\xe1lido"),e.qZA(),e.TgZ(11,"c-form-feedback",13),e._uU(12,"Ingrese el nombre de usuario"),e.qZA()(),e.TgZ(13,"c-col",10)(14,"label",14),e._uU(15,"Correo electr\xf3nico"),e.qZA(),e._UZ(16,"input",15),e.TgZ(17,"c-form-feedback",13),e._uU(18,"Correo electr\xf3nico v\xe1lido"),e.qZA(),e.TgZ(19,"c-form-feedback",13),e._uU(20,"Ingrese el correo electr\xf3nico"),e.qZA()()(),e.TgZ(21,"c-row")(22,"c-col",10)(23,"label",16),e._uU(24,"Nombre"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"c-form-feedback",13),e._uU(27,"Nombre v\xe1lido"),e.qZA(),e.TgZ(28,"c-form-feedback",13),e._uU(29,"Ingrese el nombre del usuario"),e.qZA()()(),e.TgZ(30,"c-row",18)(31,"c-col",19)(32,"label",20),e._uU(33,"Facebook"),e.qZA(),e.TgZ(34,"input",21),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onFacebookFileChange(r))}),e.qZA(),e.TgZ(35,"c-form-feedback",13),e._uU(36,"Archivo v\xe1lido"),e.qZA(),e.TgZ(37,"c-form-feedback",13),e._uU(38,"Ingrese el archivo"),e.qZA()(),e.TgZ(39,"c-col",19)(40,"label",22),e._uU(41,"Instagram"),e.qZA(),e.TgZ(42,"input",23),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onInstagramFileChange(r))}),e.qZA(),e.TgZ(43,"c-form-feedback",13),e._uU(44,"Archivo v\xe1lido"),e.qZA(),e.TgZ(45,"c-form-feedback",13),e._uU(46,"Ingrese el archivo"),e.qZA()(),e.TgZ(47,"c-col",19)(48,"label",24),e._uU(49,"Twitter"),e.qZA(),e.TgZ(50,"input",25),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onTwitterFileChange(r))}),e.qZA(),e.TgZ(51,"c-form-feedback",13),e._uU(52,"Archivo v\xe1lido"),e.qZA(),e.TgZ(53,"c-form-feedback",13),e._uU(54,"Ingrese el archivo"),e.qZA()()(),e.TgZ(55,"c-row",18)(56,"c-col",19)(57,"button",26),e._uU(58," Editar "),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.getPutUserForm())("validated",t.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1)}}let T=(()=>{class i{ngOnInit(){this._id=history.state._id,this.newUser.username=history.state.username,this.newUser.email=history.state.email,this.newUser.name=history.state.name,this.newUser.type=history.state.type,this.putUserForm=this.formBuilder.group({username:[this.newUser.username,n.kI.required],email:[this.newUser.email,n.kI.required],name:[this.newUser.name,n.kI.required],type:[this.newUser.type,n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}constructor(t,o,r){this.usersService=t,this.formBuilder=o,this.router=r,this._id="",this.validatedForm=!1,this.excalinestImgPath="C:\\Excalinest\\img\\",this.fakePath="C:\\fakepath\\",this.newUser={username:"",email:"",name:"",type:"",facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}getPutUserForm(){return this.putUserForm}onFacebookFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.facebookFile=r)}onInstagramFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.instaFile=r)}onTwitterFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.twitterFile=r)}onPutUser(){""!=this.putUserForm.value.username&&(this.newUser.username=this.putUserForm.value.username),""!=this.putUserForm.value.email&&(this.newUser.email=this.putUserForm.value.email),""!=this.putUserForm.value.name&&(this.newUser.name=this.putUserForm.value.name),""!=this.putUserForm.value.type&&(this.newUser.type=this.putUserForm.value.type),this.showSpinner=!0,this.usersService.putUser(this._id,this.newUser).subscribe({error:t=>{this.showSpinner=!1,this.error=!0,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.showSpinner=!1,this.error=!1,this.modalMessage=t.replace(/['"]+/g,""),this.openCloseInfoModal(!0)}})}isValidForm(){return""!=this.putUserForm.value.username||""!=this.putUserForm.value.email||""!=this.putUserForm.value.name||""!=this.putUserForm.value.facebook||""!=this.putUserForm.value.instagram||""!=this.putUserForm.value.twitter}submitUser(){this.validateEmailFormat()?(this.validatedForm=!0,this.isValidForm()&&this.onPutUser()):(this.error=!0,this.modalMessage="Error: Formato de correo electr\xf3nico no v\xe1lido",this.openCloseInfoModal(!1))}validateEmailFormat(){return""==this.putUserForm.value.email||this.putUserForm.value.email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)}openCloseInfoModal(t){this.visible=!this.visible,t?this.visible&&t&&this.resetForm():this.completeForm(),!this.visible&&!this.error&&this.router.navigate(["/users"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.putUserForm=this.formBuilder.group({username:["",n.kI.required],email:["",n.kI.required],name:["",n.kI.required],type:["",n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}completeForm(){this.validatedForm=!1,this.putUserForm=this.formBuilder.group({username:[this.putUserForm.value.username,n.kI.required],email:[this.putUserForm.value.email,n.kI.required],name:[this.putUserForm.value.name,n.kI.required],type:[this.putUserForm.value.type,n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(n.qu),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-update-user"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","6"],["cLabel","","for","username"],["cFormControl","","id","username","formControlName","username","type","text"],[3,"valid"],["cLabel","","for","email"],["cFormControl","","id","email","formControlName","email","type","text"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","type","text"],[1,"row"],["md","4"],["cLabel","","for","facebook"],["cFormControl","","id","facebook","formControlName","facebook","type","file","accept","image/png, image/jpeg",3,"change"],["cLabel","","for","instagram"],["cFormControl","","id","instagram","formControlName","instagram","type","file","accept","image/png, image/jpeg",3,"change"],["cLabel","","for","twitter"],["cFormControl","","id","twitter","formControlName","twitter","type","file","accept","image/png, image/jpeg",3,"change"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"]],template:function(t,o){1&t&&(e.YNc(0,w,4,0,"div",0),e.YNc(1,C,59,14,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(s){return o.handleInfoModalChange(s)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal(!1)}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return o.openCloseInfoModal(!1)}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.hij(" ",o.modalMessage," "))},dependencies:[d.O5,a.iok,a.Yp0,a.$_X,a.oHf,a.dCl,a.eFW,a.Hq3,a.PFQ,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),i})();function F(i,l){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Registrando usuario..."),e.qZA()())}function q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Registrar usuario"),e.qZA(),e.TgZ(3,"form",9),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submitUser())}),e.TgZ(4,"c-row")(5,"c-col",10)(6,"label",11),e._uU(7,"Nombre de usuario"),e.qZA(),e._UZ(8,"input",12),e.TgZ(9,"c-form-feedback",13),e._uU(10,"Nombre de usuario v\xe1lido"),e.qZA(),e.TgZ(11,"c-form-feedback",13),e._uU(12,"Ingrese el nombre de usuario"),e.qZA()(),e.TgZ(13,"c-col",10)(14,"label",14),e._uU(15,"Correo electr\xf3nico"),e.qZA(),e._UZ(16,"input",15),e.TgZ(17,"c-form-feedback",13),e._uU(18,"Correo electr\xf3nico v\xe1lido"),e.qZA(),e.TgZ(19,"c-form-feedback",13),e._uU(20,"Ingrese el correo electr\xf3nico"),e.qZA()()(),e.TgZ(21,"c-row")(22,"c-col",10)(23,"label",16),e._uU(24,"Nombre completo"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"c-form-feedback",13),e._uU(27,"Nombre completo v\xe1lido"),e.qZA(),e.TgZ(28,"c-form-feedback",13),e._uU(29,"Ingrese el nombre completo"),e.qZA()(),e.TgZ(30,"c-col",10)(31,"label",18),e._uU(32,"Tipo de usuario"),e.qZA(),e.TgZ(33,"select",19)(34,"option",20),e._uU(35,"Desarrollador"),e.qZA(),e.TgZ(36,"option",21),e._uU(37,"Administrador"),e.qZA(),e.TgZ(38,"option",22),e._uU(39,"Soporte"),e.qZA()(),e.TgZ(40,"c-form-feedback",13),e._uU(41,"Tipo de usuario seleccionado"),e.qZA(),e.TgZ(42,"c-form-feedback",13),e._uU(43,"Ingrese el tipo de usuario"),e.qZA()()(),e.TgZ(44,"c-row",23)(45,"c-col",24)(46,"label",25),e._uU(47,"Facebook"),e.qZA(),e.TgZ(48,"input",26),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onFacebookFileChange(r))}),e.qZA(),e.TgZ(49,"c-form-feedback",13),e._uU(50,"Archivo v\xe1lido"),e.qZA(),e.TgZ(51,"c-form-feedback",13),e._uU(52,"Ingrese el archivo"),e.qZA()(),e.TgZ(53,"c-col",24)(54,"label",27),e._uU(55,"Instagram"),e.qZA(),e.TgZ(56,"input",28),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onInstagramFileChange(r))}),e.qZA(),e.TgZ(57,"c-form-feedback",13),e._uU(58,"Archivo v\xe1lido"),e.qZA(),e.TgZ(59,"c-form-feedback",13),e._uU(60,"Ingrese el archivo"),e.qZA()(),e.TgZ(61,"c-col",24)(62,"label",29),e._uU(63,"Twitter"),e.qZA(),e.TgZ(64,"input",30),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onTwitterFileChange(r))}),e.qZA(),e.TgZ(65,"c-form-feedback",13),e._uU(66,"Archivo v\xe1lido"),e.qZA(),e.TgZ(67,"c-form-feedback",13),e._uU(68,"Ingrese el archivo"),e.qZA()()(),e.TgZ(69,"c-row",23)(70,"c-col",24)(71,"button",31),e._uU(72," Registrar "),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.getPostUserForm())("validated",t.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(12),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1)}}let k=(()=>{class i{ngOnInit(){this.postUserForm=this.formBuilder.group({username:["",n.kI.required],email:["",n.kI.required],name:["",n.kI.required],type:["",n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}constructor(t,o,r){this.usersService=t,this.formBuilder=o,this.router=r,this.validatedForm=!1,this.excalinestImgPath="C:\\Excalinest\\img\\",this.fakePath="C:\\fakepath\\",this.newUser={username:"",email:"",name:"",type:"",facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}getPostUserForm(){return this.postUserForm}onFacebookFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.facebookFile=r)}onInstagramFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.instaFile=r)}onTwitterFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.twitterFile=r)}onPostUser(){this.newUser.username=this.postUserForm.value.username,this.newUser.email=this.postUserForm.value.email,this.newUser.name=this.postUserForm.value.name,this.newUser.type=this.postUserForm.value.type,this.showSpinner=!0,this.usersService.postUser(this.newUser).subscribe({error:t=>{this.showSpinner=!1,this.error=!0,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.showSpinner=!1,this.error=!1,this.modalMessage=t.replace(/['"]+/g,""),this.openCloseInfoModal(!0)}})}submitUser(){this.validateEmailFormat()?(this.validatedForm=!0,this.postUserForm.dirty&&this.postUserForm.valid&&this.onPostUser()):(this.error=!0,this.modalMessage="Error: Formato de correo electr\xf3nico no v\xe1lido",this.openCloseInfoModal(!1))}validateEmailFormat(){return this.postUserForm.value.email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)}openCloseInfoModal(t){this.visible=!this.visible,t?this.visible&&t&&this.resetForm():this.completeForm(),!this.visible&&!this.error&&this.router.navigate(["/users"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.postUserForm=this.formBuilder.group({username:["",n.kI.required],email:["",n.kI.required],name:["",n.kI.required],type:["",n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}completeForm(){this.validatedForm=!1,this.postUserForm=this.formBuilder.group({username:[this.postUserForm.value.username,n.kI.required],email:[this.postUserForm.value.email,n.kI.required],name:[this.postUserForm.value.name,n.kI.required],type:[this.postUserForm.value.type,n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(n.qu),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-post-user"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","6"],["cLabel","","for","username"],["cFormControl","","id","username","formControlName","username","required","","type","text"],[3,"valid"],["cLabel","","for","email"],["cFormControl","","id","email","formControlName","email","required","","type","text"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","required","","type","text"],["cLabel","","for","type"],["cFormControl","","id","type","formControlName","type","required","",1,"form-select"],["value","desarrollador","selected",""],["value","administrador"],["value","soporte"],[1,"row"],["md","4"],["cLabel","","for","facebook"],["cFormControl","","id","facebook","formControlName","facebook","accept","image/png, image/jpeg","required","","type","file",3,"change"],["cLabel","","for","instagram"],["cFormControl","","id","instagram","formControlName","instagram","accept","image/png, image/jpeg","required","","type","file",3,"change"],["cLabel","","for","twitter"],["cFormControl","","id","twitter","formControlName","twitter","accept","image/png, image/jpeg","required","","type","file",3,"change"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"]],template:function(t,o){1&t&&(e.YNc(0,F,4,0,"div",0),e.YNc(1,q,73,16,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(s){return o.handleInfoModalChange(s)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal(!1)}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return o.openCloseInfoModal(!1)}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.hij(" ",o.modalMessage," "))},dependencies:[d.O5,a.iok,a.Yp0,a.$_X,a.oHf,a.dCl,a.eFW,a.Hq3,a.PFQ,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.Q7,n.sg,n.u,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),i})();var I=u(7185);function A(i,l){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Cargando usuarios..."),e.qZA()())}const y=function(){return["/users/user"]};function M(i,l){if(1&i&&(e.TgZ(0,"c-col",10)(1,"c-card",11)(2,"c-card-body")(3,"h5",12),e._uU(4),e.qZA(),e.TgZ(5,"c-row")(6,"c-col",13)(7,"button",14),e._uU(8,"Ver detalles"),e.qZA()()(),e.TgZ(9,"p",15)(10,"small",16),e._uU(11),e.qZA()()()()()),2&i){const t=l.$implicit;e.Q6J("sm",3),e.xp6(4),e.Oqu(t.username),e.xp6(3),e.Q6J("routerLink",e.DdM(5,y))("state",t),e.xp6(4),e.hij("Rol: ",t.type,"")}}function x(i,l){if(1&i&&(e.TgZ(0,"div")(1,"c-row"),e.YNc(2,M,12,6,"c-col",9),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.users)}}let J=(()=>{class i{constructor(t,o){this.usersService=t,this.toastr=o,this.users=new Array,this.showSpinner=!0,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1}ngOnInit(){this.usersService.getUsers().subscribe({error:t=>{this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.showSpinner=!1,0==t.length&&(this.modalMessage="A\xfan no hay usuarios.",this.openCloseInfoModal()),this.users=t}})}deleteUser(t){this.showSpinner=!0,this.usersService.deleteUser(t).subscribe({error:o=>{this.showSpinner=!1,this.modalMessage=o.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:()=>{this.showSpinner=!1,this.toastr.success("El usuario se elimin\xf3 correctamente","\xc9xito"),setTimeout(()=>{location.reload()},3e3)}})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(I._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-get-users"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[3,"sm",4,"ngFor","ngForOf"],[3,"sm"],[1,"mb-4"],["cCardTitle",""],[1,"text-end","mb-12"],["cButton","","color","dark","size","sm",1,"mb-4",3,"routerLink","state"],["cCardText",""],[1,"text-medium-emphasis"]],template:function(t,o){1&t&&(e.YNc(0,A,4,0,"div",0),e.YNc(1,x,3,1,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(s){return o.handleInfoModalChange(s)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal()}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return o.openCloseInfoModal()}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.Oqu(o.modalMessage))},dependencies:[d.sg,d.O5,p.rH,a.AkF,a.yue,a.PVT,a.qkm,a.iok,a.Yp0,a.Hq3,a.PFQ,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{margin-right:5%}"]}),i})();var v=u(1481),Z=u(726);function S(i,l){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Eliminando usuario..."),e.qZA()())}function P(i,l){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Descargando videojuego..."),e.qZA()())}function Q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",26),e._UZ(2,"img",27),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",28)(8,"button",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.downloadFile(s))}),e.O4$(),e._UZ(9,"svg",30),e.qZA()()()}if(2&i){const t=l.$implicit;e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(2),e.Oqu(t.titulo),e.xp6(2),e.Oqu(t.sinopsis)}}const N=function(){return["/users/update"]};function E(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"c-row",10)(2,"c-row")(3,"c-col",11)(4,"h1"),e._uU(5),e.qZA()()(),e._UZ(6,"br")(7,"br")(8,"br"),e.TgZ(9,"c-row")(10,"c-col",12)(11,"button",13),e.O4$(),e._UZ(12,"svg",14),e._uU(13,"Editar"),e.qZA(),e.kcU(),e.TgZ(14,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.showDeleteModal())}),e.O4$(),e._UZ(15,"svg",16),e._uU(16,"Eliminar"),e.qZA()()(),e.kcU(),e._UZ(17,"br")(18,"br")(19,"br")(20,"br"),e.TgZ(21,"c-row")(22,"c-col",17)(23,"h4"),e._uU(24,"Nombre"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA()()(),e._UZ(27,"br")(28,"br")(29,"br"),e.TgZ(30,"c-row")(31,"c-col",17)(32,"h4"),e._uU(33,"Correo electr\xf3nico"),e.qZA(),e.TgZ(34,"p"),e._uU(35),e.qZA()(),e.TgZ(36,"c-col",17)(37,"h4"),e._uU(38,"Tipo de usuario"),e.qZA(),e.TgZ(39,"p"),e._uU(40),e.qZA()()(),e._UZ(41,"br")(42,"br")(43,"br"),e.qZA(),e._UZ(44,"br"),e.TgZ(45,"c-row",10)(46,"h4"),e._uU(47),e.qZA()(),e.TgZ(48,"c-row",18)(49,"c-col",12)(50,"c-row",19)(51,"h6"),e._uU(52,"Facebook"),e.qZA()(),e.TgZ(53,"c-row"),e._UZ(54,"img",20),e.qZA()(),e.TgZ(55,"c-col",12)(56,"c-row",19)(57,"h6"),e._uU(58,"Instagram"),e.qZA()(),e.TgZ(59,"c-row"),e._UZ(60,"img",20),e.qZA()(),e.TgZ(61,"c-col",12)(62,"c-row",19)(63,"h6"),e._uU(64,"Twitter"),e.qZA()(),e.TgZ(65,"c-row"),e._UZ(66,"img",20),e.qZA()()(),e.TgZ(67,"div"),e._UZ(68,"br")(69,"br"),e.TgZ(70,"h4"),e._uU(71,"Videojuegos publicados"),e.qZA(),e.TgZ(72,"div",21)(73,"table",22)(74,"thead")(75,"tr")(76,"th",23),e._uU(77,"Portada"),e.qZA(),e.TgZ(78,"th",24),e._uU(79,"Nombre"),e.qZA(),e.TgZ(80,"th",24),e._uU(81,"Sinopsis"),e.qZA(),e._UZ(82,"th",24),e.qZA()(),e.TgZ(83,"tbody"),e.YNc(84,Q,10,3,"tr",25),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.user.username),e.xp6(5),e.Q6J("sm",3),e.xp6(1),e.Q6J("routerLink",e.DdM(15,N))("state",t.user),e.xp6(15),e.Oqu(t.user.name),e.xp6(9),e.Oqu(t.user.email),e.xp6(5),e.Oqu(t.user.type),e.xp6(7),e.hij("Redes sociales de ",t.user.username,""),e.xp6(2),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.user.imagenFacebook,e.LSH),e.xp6(1),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.user.imagenInstagram,e.LSH),e.xp6(1),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.user.imagenTwitter,e.LSH),e.xp6(18),e.Q6J("ngForOf",t.videogames)}}function B(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onDeleteUser())}),e._uU(1,"Eliminar"),e.qZA()}}let O=(()=>{class i{ngOnInit(){this.user=history.state;var t=btoa(new Uint8Array(this.user.facebook.data.data).reduce((s,c)=>s+String.fromCharCode(c),""));this.user.imagenFacebook=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.user.facebook.tipoImagen+";base64, "+t);var o=btoa(new Uint8Array(this.user.instagram.data.data).reduce((s,c)=>s+String.fromCharCode(c),""));this.user.imagenInstagram=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.user.instagram.tipoImagen+";base64, "+o);var r=btoa(new Uint8Array(this.user.twitter.data.data).reduce((s,c)=>s+String.fromCharCode(c),""));this.user.imagenTwitter=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.user.twitter.tipoImagen+";base64, "+r),this.videogamesService.getVideogames("",this.user.username).subscribe({error:s=>{this.error=!0,this.modalMessage=s.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:s=>{s.forEach(c=>{var m=btoa(new Uint8Array(c.portada.data.data).reduce((_,b)=>_+String.fromCharCode(b),""));c.imagen=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+c.portada.tipoImagen+";base64, "+m)}),this.videogames=s}})}constructor(t,o,r,s){this.usersService=t,this.router=o,this.domSanitizer=r,this.videogamesService=s,this.videojuegosDownloadsPath="C:\\Excalinest\\",this.videogames=new Array,this.deleteButton=!1,this.user={username:"",email:"",name:"",type:"",facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.showSpinnerDownload=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}showDeleteModal(){this.deleteButton=!0,this.modalMessage="\xbfEst\xe1 seguro de eliminar "+this.user.username+"?",this.openCloseInfoModal()}onDeleteUser(){this.openCloseInfoModal(),this.showSpinner=!0,this.usersService.deleteUser(this.user.email).subscribe({error:t=>{this.showSpinner=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:()=>{this.showSpinner=!1,this.router.navigate(["/users"])}})}downloadFile(t){this.showSpinnerDownload=!0,this.videogamesService.getZipFile({destPath:this.videojuegosDownloadsPath,filename:t.titulo+".zip"}).subscribe({error:r=>{this.showSpinnerDownload=!1,this.modalMessage=r.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:r=>{this.showSpinnerDownload=!1,this.modalMessage=r+" Excalinest coloca el archivo en C:\\Excalinest",this.openCloseInfoModal()}})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(p.F0),e.Y36(v.H7),e.Y36(Z.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-detail"]],decls:14,vars:8,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","danger",3,"click",4,"ngIf"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[1,"row-title"],["md","8"],[3,"sm"],["cButton","","color","info","size","sm",1,"crud-button","right-margin",2,"margin-right","7%",3,"routerLink","state"],["cIcon","","name","cilPencil",1,"me-2","icon"],["cButton","","color","danger","size","sm",1,"crud-button",3,"click"],["cIcon","","name","cilTrash",1,"me-2","icon"],["md","6"],[1,"row-social-net"],[1,"text-center"],["cCardImg","top",1,"w-50","p-3","rounded","mx-auto","d-block",3,"src"],[1,"table-responsive"],[1,"table","table-striped","videogames-table"],["scope","col","width","200px"],["scope","col"],[4,"ngFor","ngForOf"],[2,"vertical-align","middle"],["cCardImg","top",2,"object-fit","cover",3,"src"],[1,"center-content"],["cButton","","color","dark","size","sm",3,"click"],["cIcon","","name","cilCloudDownload",1,"me-1","icon"],["cButton","","color","danger",3,"click"]],template:function(t,o){1&t&&(e.YNc(0,S,4,0,"div",0),e.YNc(1,P,4,0,"div",0),e.YNc(2,E,85,16,"div",1),e.TgZ(3,"c-modal",2),e.NdJ("visibleChange",function(s){return o.handleInfoModalChange(s)}),e.TgZ(4,"c-modal-header")(5,"h5",3),e._uU(6),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal()}),e.qZA()(),e.TgZ(8,"c-modal-body"),e._uU(9),e.qZA(),e.TgZ(10,"c-modal-footer"),e.YNc(11,B,2,0,"button",5),e.TgZ(12,"button",6),e.NdJ("click",function(){return o.openCloseInfoModal()}),e._uU(13," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",o.showSpinnerDownload),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner&&0==o.showSpinnerDownload),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.hij(" ",o.modalMessage," "),e.xp6(2),e.Q6J("ngIf",o.deleteButton))},dependencies:[d.sg,d.O5,p.rH,a.pce,a.iok,a.Yp0,f.ar,a.Hq3,a.PFQ,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.videogames-table[_ngcontent-%COMP%]{margin-bottom:5%}.center-content[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),i})();function D(i,l){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Cargando informaci\xf3n del perfil..."),e.qZA()())}function Y(i,l){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Descargando videojuego..."),e.qZA()())}function H(i,l){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Eliminando videojuego..."),e.qZA()())}function L(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",24),e._UZ(2,"img",25),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",26)(8,"button",27),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.downloadFile(s))}),e.O4$(),e._UZ(9,"svg",28),e.qZA()(),e.kcU(),e.TgZ(10,"td",26)(11,"button",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.deleteFile(s))}),e.O4$(),e._UZ(12,"svg",30),e.qZA()()()}if(2&i){const t=l.$implicit;e.xp6(2),e.Q6J("src",t.imagen,e.LSH),e.xp6(2),e.Oqu(t.titulo),e.xp6(2),e.Oqu(t.sinopsis)}}const G=function(){return["/users/update-my-profile"]};function j(i,l){if(1&i&&(e.TgZ(0,"div")(1,"c-row",10)(2,"c-row")(3,"c-col",11)(4,"h1"),e._uU(5),e.qZA()()(),e._UZ(6,"br")(7,"br")(8,"br"),e.TgZ(9,"c-row")(10,"c-col",12)(11,"button",13),e.O4$(),e._UZ(12,"svg",14),e._uU(13,"Editar mi perfil"),e.qZA()()(),e.kcU(),e._UZ(14,"br")(15,"br")(16,"br")(17,"br"),e.TgZ(18,"c-row")(19,"c-col",15)(20,"h4"),e._uU(21,"Nombre"),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.qZA()()(),e._UZ(24,"br")(25,"br")(26,"br"),e.TgZ(27,"c-row")(28,"c-col",15)(29,"h4"),e._uU(30,"Correo electr\xf3nico"),e.qZA(),e.TgZ(31,"p"),e._uU(32),e.qZA()(),e.TgZ(33,"c-col",15)(34,"h4"),e._uU(35,"Tipo de usuario"),e.qZA(),e.TgZ(36,"p"),e._uU(37),e.qZA()()(),e._UZ(38,"br")(39,"br")(40,"br"),e.qZA(),e._UZ(41,"br"),e.TgZ(42,"c-row",10)(43,"h5"),e._uU(44),e.qZA()(),e.TgZ(45,"c-row",16)(46,"c-col",12)(47,"c-row",17)(48,"h6"),e._uU(49,"Facebook"),e.qZA()(),e.TgZ(50,"c-row"),e._UZ(51,"img",18),e.qZA()(),e.TgZ(52,"c-col",12)(53,"c-row",17)(54,"h6"),e._uU(55,"Instagram"),e.qZA()(),e.TgZ(56,"c-row"),e._UZ(57,"img",18),e.qZA()(),e.TgZ(58,"c-col",12)(59,"c-row",17)(60,"h6"),e._uU(61,"Twitter"),e.qZA()(),e.TgZ(62,"c-row"),e._UZ(63,"img",18),e.qZA()()(),e.TgZ(64,"div"),e._UZ(65,"br")(66,"br"),e.TgZ(67,"h4"),e._uU(68,"Mis Videojuegos"),e.qZA(),e.TgZ(69,"div",19)(70,"table",20)(71,"thead")(72,"tr")(73,"th",21),e._uU(74,"Portada"),e.qZA(),e.TgZ(75,"th",22),e._uU(76,"Nombre"),e.qZA(),e.TgZ(77,"th",22),e._uU(78,"Sinopsis"),e.qZA(),e._UZ(79,"th",22)(80,"th",22),e.qZA()(),e.TgZ(81,"tbody"),e.YNc(82,L,13,3,"tr",23),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.user.username),e.xp6(5),e.Q6J("sm",3),e.xp6(1),e.Q6J("routerLink",e.DdM(15,G))("state",t.user),e.xp6(12),e.Oqu(t.user.name),e.xp6(9),e.Oqu(t.user.email),e.xp6(5),e.Oqu(t.user.type),e.xp6(7),e.hij("Redes sociales de ",t.user.username,""),e.xp6(2),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.user.imagenFacebook,e.LSH),e.xp6(1),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.user.imagenInstagram,e.LSH),e.xp6(1),e.Q6J("sm",4),e.xp6(5),e.Q6J("src",t.user.imagenTwitter,e.LSH),e.xp6(19),e.Q6J("ngForOf",t.videogames)}}function z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onDeleteVideogame())}),e._uU(1,"Eliminar"),e.qZA()}}let K=(()=>{class i{ngOnInit(){this.usersService.getUser().subscribe({error:t=>{this.showSpinner=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.user=t;var o=btoa(new Uint8Array(this.user.facebook.data.data).reduce((c,m)=>c+String.fromCharCode(m),""));this.user.imagenFacebook=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.user.facebook.tipoImagen+";base64, "+o);var r=btoa(new Uint8Array(this.user.instagram.data.data).reduce((c,m)=>c+String.fromCharCode(m),""));this.user.imagenInstagram=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.user.instagram.tipoImagen+";base64, "+r);var s=btoa(new Uint8Array(this.user.twitter.data.data).reduce((c,m)=>c+String.fromCharCode(m),""));this.user.imagenTwitter=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+this.user.twitter.tipoImagen+";base64, "+s),this.videogamesService.getVideogames("",this.user.username).subscribe({error:c=>{this.error=!0,this.modalMessage=c.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:c=>{c.forEach(m=>{var _=btoa(new Uint8Array(m.portada.data.data).reduce((b,te)=>b+String.fromCharCode(te),""));m.imagen=this.domSanitizer.bypassSecurityTrustResourceUrl("data:"+m.portada.tipoImagen+";base64, "+_)}),this.videogames=c}}),this.showSpinner=!1}})}constructor(t,o,r,s){this.usersService=t,this.router=o,this.domSanitizer=r,this.videogamesService=s,this.deleteButton=!1,this.videogames=new Array,this.videojuegosDownloadsPath="C:\\Excalinest\\",this.videogameToDelete="",this.user={username:"",email:"",name:"",type:"",facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!0,this.showSpinnerDownload=!1,this.showSpinnerDelete=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}downloadFile(t){this.showSpinnerDownload=!0,this.videogamesService.getZipFile({destPath:this.videojuegosDownloadsPath,filename:t.titulo+".zip"}).subscribe({error:r=>{this.showSpinnerDownload=!1,this.modalMessage=r.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:r=>{this.showSpinnerDownload=!1,this.modalMessage=r+" Excalinest coloca el archivo en C:\\Excalinest",this.openCloseInfoModal()}})}deleteFile(t){this.videogameToDelete=t._id,this.deleteButton=!0,this.modalMessage="\xbfEst\xe1 seguro de eliminar "+t.titulo+"?",this.openCloseInfoModal()}onDeleteVideogame(){this.openCloseInfoModal(),this.showSpinnerDelete=!0,this.videogamesService.deleteVideogame({_id:this.videogameToDelete}).subscribe({error:t=>{this.showSpinnerDelete=!1,this.deleteButton=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.showSpinnerDelete=!1,this.router.navigate(["/dashboard"])}})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(p.F0),e.Y36(v.H7),e.Y36(Z.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-my-profile"]],decls:15,vars:9,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","danger",3,"click",4,"ngIf"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[1,"row-title"],["md","8"],[3,"sm"],["cButton","","color","info","size","sm",1,"crud-button","right-margin",2,"margin-right","7%",3,"routerLink","state"],["cIcon","","name","cilPencil",1,"me-2","icon"],["md","6"],[1,"row-social-net"],[1,"text-center"],["cCardImg","top",1,"w-50","p-3","rounded","mx-auto","d-block",3,"src"],[1,"table-responsive"],[1,"table","table-striped","videogames-table"],["scope","col","width","200px"],["scope","col"],[4,"ngFor","ngForOf"],[2,"vertical-align","middle"],["cCardImg","top",2,"object-fit","cover",3,"src"],[1,"center-content"],["cButton","","color","dark","size","sm",3,"click"],["cIcon","","name","cilCloudDownload",1,"me-1","icon"],["cButton","","color","danger","size","sm",3,"click"],["cIcon","","name","cilTrash",1,"me-1","icon"],["cButton","","color","danger",3,"click"]],template:function(t,o){1&t&&(e.YNc(0,D,4,0,"div",0),e.YNc(1,Y,4,0,"div",0),e.YNc(2,H,4,0,"div",0),e.YNc(3,j,83,16,"div",1),e.TgZ(4,"c-modal",2),e.NdJ("visibleChange",function(s){return o.handleInfoModalChange(s)}),e.TgZ(5,"c-modal-header")(6,"h5",3),e._uU(7),e.qZA(),e.TgZ(8,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal()}),e.qZA()(),e.TgZ(9,"c-modal-body"),e._uU(10),e.qZA(),e.TgZ(11,"c-modal-footer"),e.YNc(12,z,2,0,"button",5),e.TgZ(13,"button",6),e.NdJ("click",function(){return o.openCloseInfoModal()}),e._uU(14," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",o.showSpinnerDownload),e.xp6(1),e.Q6J("ngIf",o.showSpinnerDelete),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner&&0==o.showSpinnerDownload&&0==o.showSpinnerDelete),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.hij(" ",o.modalMessage," "),e.xp6(2),e.Q6J("ngIf",o.deleteButton))},dependencies:[d.sg,d.O5,p.rH,a.pce,a.iok,a.Yp0,f.ar,a.Hq3,a.PFQ,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.videogames-table[_ngcontent-%COMP%]{margin-bottom:5%}.center-content[_ngcontent-%COMP%]{align-items:center;text-align:center;vertical-align:middle}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),i})();function R(i,l){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Editando perfil..."),e.qZA()())}function $(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Editar usuario"),e.qZA(),e.TgZ(3,"form",9),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submitUser())}),e.TgZ(4,"c-row")(5,"c-col",10)(6,"label",11),e._uU(7,"Nombre de usuario"),e.qZA(),e._UZ(8,"input",12),e.TgZ(9,"c-form-feedback",13),e._uU(10,"Nombre de usuario v\xe1lido"),e.qZA(),e.TgZ(11,"c-form-feedback",13),e._uU(12,"Ingrese el nombre de usuario"),e.qZA()(),e.TgZ(13,"c-col",10)(14,"label",14),e._uU(15,"Correo electr\xf3nico"),e.qZA(),e._UZ(16,"input",15),e.TgZ(17,"c-form-feedback",13),e._uU(18,"Correo electr\xf3nico v\xe1lido"),e.qZA(),e.TgZ(19,"c-form-feedback",13),e._uU(20,"Ingrese el correo electr\xf3nico"),e.qZA()()(),e.TgZ(21,"c-row")(22,"c-col",10)(23,"label",16),e._uU(24,"Nombre"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"c-form-feedback",13),e._uU(27,"Nombre v\xe1lido"),e.qZA(),e.TgZ(28,"c-form-feedback",13),e._uU(29,"Ingrese el nombre del usuario"),e.qZA()(),e._UZ(30,"c-col",10),e.qZA(),e.TgZ(31,"c-row",18)(32,"c-col",19)(33,"label",20),e._uU(34,"Facebook"),e.qZA(),e.TgZ(35,"input",21),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onFacebookFileChange(r))}),e.qZA(),e.TgZ(36,"c-form-feedback",13),e._uU(37,"Archivo v\xe1lido"),e.qZA(),e.TgZ(38,"c-form-feedback",13),e._uU(39,"Ingrese el archivo"),e.qZA()(),e.TgZ(40,"c-col",19)(41,"label",22),e._uU(42,"Instagram"),e.qZA(),e.TgZ(43,"input",23),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onInstagramFileChange(r))}),e.qZA(),e.TgZ(44,"c-form-feedback",13),e._uU(45,"Archivo v\xe1lido"),e.qZA(),e.TgZ(46,"c-form-feedback",13),e._uU(47,"Ingrese el archivo"),e.qZA()(),e.TgZ(48,"c-col",19)(49,"label",24),e._uU(50,"Twitter"),e.qZA(),e.TgZ(51,"input",25),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onTwitterFileChange(r))}),e.qZA(),e.TgZ(52,"c-form-feedback",13),e._uU(53,"Archivo v\xe1lido"),e.qZA(),e.TgZ(54,"c-form-feedback",13),e._uU(55,"Ingrese el archivo"),e.qZA()()(),e.TgZ(56,"c-row",18)(57,"c-col",19)(58,"button",26),e._uU(59," Editar "),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.getPutUserForm())("validated",t.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(7),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(8),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1)}}let V=(()=>{class i{ngOnInit(){this._id=history.state._id,this.newUser.username=history.state.username,this.newUser.email=history.state.email,this.newUser.name=history.state.name,this.newUser.type=history.state.type,this.putUserForm=this.formBuilder.group({username:[this.newUser.username,n.kI.required],email:[this.newUser.email,n.kI.required],name:[this.newUser.name,n.kI.required],type:[this.newUser.type,n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}constructor(t,o,r){this.usersService=t,this.formBuilder=o,this.router=r,this._id="",this.validatedForm=!1,this.excalinestImgPath="C:\\Excalinest\\img\\",this.fakePath="C:\\fakepath\\",this.newUser={username:"",email:"",name:"",type:"",facebook:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenFacebook:"",instagram:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenInstagram:"",twitter:{data:{data:new ArrayBuffer(0),type:""},tipoImagen:""},imagenTwitter:"",facebookFile:new File([],""),instaFile:new File([],""),twitterFile:new File([],"")},this.showSpinner=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1}getPutUserForm(){return this.putUserForm}onFacebookFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.facebookFile=r)}onInstagramFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.instaFile=r)}onTwitterFileChange(t){const r=t.target.files?.[0];r&&(this.newUser.twitterFile=r)}onPutUser(){""!=this.putUserForm.value.username&&(this.newUser.username=this.putUserForm.value.username),""!=this.putUserForm.value.email&&(this.newUser.email=this.putUserForm.value.email),""!=this.putUserForm.value.name&&(this.newUser.name=this.putUserForm.value.name),""!=this.putUserForm.value.type&&(this.newUser.type=""),this.showSpinner=!0,this.usersService.putProfile(this._id,this.newUser).subscribe({error:t=>{this.showSpinner=!1,this.error=!0,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal(!1)},next:t=>{this.showSpinner=!1,this.error=!1,this.modalMessage=t.replace(/['"]+/g,""),this.openCloseInfoModal(!0)}})}isValidForm(){return""!=this.putUserForm.value.username||""!=this.putUserForm.value.email||""!=this.putUserForm.value.name||""!=this.putUserForm.value.facebook||""!=this.putUserForm.value.instagram||""!=this.putUserForm.value.twitter}submitUser(){this.validateEmailFormat()?(this.validatedForm=!0,this.isValidForm()&&this.onPutUser()):(this.error=!0,this.modalMessage="Error: Formato de correo electr\xf3nico no v\xe1lido",this.openCloseInfoModal(!1))}validateEmailFormat(){return""==this.putUserForm.value.email||this.putUserForm.value.email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)}openCloseInfoModal(t){this.visible=!this.visible,t?this.visible&&t&&this.resetForm():this.completeForm(),!this.visible&&!this.error&&this.router.navigate(["users/profile"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.putUserForm=this.formBuilder.group({username:["",n.kI.required],email:["",n.kI.required],name:["",n.kI.required],type:["",n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}completeForm(){this.validatedForm=!1,this.putUserForm=this.formBuilder.group({username:[this.putUserForm.value.username,n.kI.required],email:[this.putUserForm.value.email,n.kI.required],name:[this.putUserForm.value.name,n.kI.required],type:[this.putUserForm.value.type,n.kI.required],facebook:["",n.kI.required],instagram:["",n.kI.required],twitter:["",n.kI.required]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(n.qu),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-update-my-profile"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","6"],["cLabel","","for","username"],["cFormControl","","id","username","formControlName","username","type","text"],[3,"valid"],["cLabel","","for","email"],["cFormControl","","id","email","formControlName","email","type","text"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","type","text"],[1,"row"],["md","4"],["cLabel","","for","facebook"],["cFormControl","","id","facebook","formControlName","facebook","type","file","accept","image/png, image/jpeg",3,"change"],["cLabel","","for","instagram"],["cFormControl","","id","instagram","formControlName","instagram","type","file","accept","image/png, image/jpeg",3,"change"],["cLabel","","for","twitter"],["cFormControl","","id","twitter","formControlName","twitter","type","file","accept","image/png, image/jpeg",3,"change"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"]],template:function(t,o){1&t&&(e.YNc(0,R,4,0,"div",0),e.YNc(1,$,60,14,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(s){return o.handleInfoModalChange(s)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal(!1)}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return o.openCloseInfoModal(!1)}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.hij(" ",o.modalMessage," "))},dependencies:[d.O5,a.iok,a.Yp0,a.$_X,a.oHf,a.dCl,a.eFW,a.Hq3,a.PFQ,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),i})();var h=u(2993);const X=[{path:"",redirectTo:"get",pathMatch:"full"},{path:"",data:{title:"Usuarios"},children:[{path:"",pathMatch:"full",redirectTo:"colors"},{path:"update",component:T,data:{title:"Actualizar usuario",usuario:"administrador"},canActivate:[h.a]},{path:"post",component:k,data:{title:"Registrar usuario",usuario:"administrador"},canActivate:[h.a]},{path:"get",component:J,data:{title:"Usuarios",usuario:"administrador"},canActivate:[h.a]},{path:"user",component:O,data:{title:"Detalles del usuario",usuario:"administrador"},canActivate:[h.a]},{path:"profile",component:K,data:{title:"Mi perfil",usuario:"general"},canActivate:[h.a]},{path:"update-my-profile",component:V,data:{title:"Actualizar mi perfil",usuario:"general"},canActivate:[h.a]}]}];let W=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(X),p.Bz]}),i})(),ee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,W,a.dTQ,a.zE6,a.gzQ,f.QX,a.dGk,a.P4_,a.ejP,a.hJ1,n.u5,n.UX,a.ga2,a.kWm,a.m81,a.Xo8,a.zkK]}),i})()}}]);
"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[447],{7447:(J,p,l)=>{l.r(p),l.d(p,{TagsModule:()=>A});var u=l(6895),h=l(1334),i=l(433),a=l(7911),g=l(593),e=l(1571),c=l(623),T=l(7185);function f(n,s){1&n&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Cargando etiquetas..."),e.qZA()())}function _(n,s){1&n&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e.TgZ(2,"span",9),e._uU(3,"Eliminando etiqueta..."),e.qZA()())}const v=function(){return["/tags/update"]},b=function(n){return{tag:n}};function C(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"c-col",11)(1,"c-card",12)(2,"c-card-body")(3,"h5",13),e._uU(4),e.qZA(),e.TgZ(5,"c-row")(6,"c-col",14)(7,"a",15),e._uU(8,"Editar"),e.qZA(),e.TgZ(9,"button",16),e.NdJ("click",function(){const d=e.CHM(t).$implicit,k=e.oxw(2);return e.KtG(k.deleteTag(d.id,d.name))}),e._uU(10,"Eliminar"),e.qZA()()()()()()}if(2&n){const t=s.$implicit;e.Q6J("sm",3),e.xp6(4),e.Oqu(t.name),e.xp6(3),e.Q6J("routerLink",e.DdM(4,v))("queryParams",e.VKq(5,b,t.id))}}function Z(n,s){if(1&n&&(e.TgZ(0,"div")(1,"c-row"),e.YNc(2,C,11,7,"c-col",10),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.tags)}}function M(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onDeleteTag())}),e._uU(1,"Eliminar"),e.qZA()}}let q=(()=>{class n{constructor(t,o){this.tagsService=t,this.toastr=o,this.tags=new Array,this.tagToDelete=0,this.showSpinner=!0,this.showSpinnerDelete=!1,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.deleteButton=!1}ngOnInit(){this.tagsService.getTags().subscribe({error:t=>{this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.showSpinner=!1,0==t.length&&(this.modalMessage="A\xfan no hay etiquetas.",this.openCloseInfoModal()),this.tags=t}})}deleteTag(t,o){this.tagToDelete=t,this.modalMessage="\xbfEst\xe1 seguro que desea eliminar la etiqueta "+o+"?",this.deleteButton=!0,this.openCloseInfoModal()}onDeleteTag(){this.openCloseInfoModal(),this.showSpinnerDelete=!0,this.tagsService.deleteTag(this.tagToDelete).subscribe({error:t=>{this.showSpinnerDelete=!1,this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:()=>{location.reload()}})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.i),e.Y36(T._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-get-tags"]],decls:14,vars:8,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","danger",3,"click",4,"ngIf"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[3,"sm",4,"ngFor","ngForOf"],[3,"sm"],[1,"mb-4"],["cCardTitle",""],[1,"text-end","mb-12"],["cButton","","color","info","size","sm",1,"update-button",3,"routerLink","queryParams"],["cButton","","color","danger","size","sm",3,"click"],["cButton","","color","danger",3,"click"]],template:function(t,o){1&t&&(e.YNc(0,f,4,0,"div",0),e.YNc(1,_,4,0,"div",0),e.YNc(2,Z,3,1,"div",1),e.TgZ(3,"c-modal",2),e.NdJ("visibleChange",function(d){return o.handleInfoModalChange(d)}),e.TgZ(4,"c-modal-header")(5,"h5",3),e._uU(6),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return o.openCloseInfoModal()}),e.qZA()(),e.TgZ(8,"c-modal-body"),e._uU(9),e.qZA(),e.TgZ(10,"c-modal-footer"),e.YNc(11,M,2,0,"button",5),e.TgZ(12,"button",6),e.NdJ("click",function(){return o.openCloseInfoModal()}),e._uU(13," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",o.showSpinner),e.xp6(1),e.Q6J("ngIf",o.showSpinnerDelete),e.xp6(1),e.Q6J("ngIf",0==o.showSpinner&&0==o.showSpinnerDelete),e.xp6(1),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.Oqu(o.modalMessage),e.xp6(2),e.Q6J("ngIf",o.deleteButton))},dependencies:[u.sg,u.O5,g.rH,a.AkF,a.yue,a.qkm,a.iok,a.Yp0,a.Hq3,a.PFQ,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{margin-right:5%}"]}),n})(),F=(()=>{class n{constructor(t,o){this.TagsService=t,this.formBuilder=o,this.postTagForm=new i.cw({}),this.validatedForm=!1,this.newTag={id:-1,name:""},this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1}getPostTagForm(){return this.postTagForm}ngOnInit(){this.postTagForm=this.formBuilder.group({name:["",i.kI.required]})}onPostTag(){this.TagsService.getMaxId().subscribe(t=>{this.newTag.id=t+1,this.newTag.name=this.postTagForm.value.name,this.TagsService.postTag(this.newTag).subscribe({error:o=>{this.modalMessage=o.error.replace(/['"]+/g,""),this.openCloseInfoModal(),this.resetForm()},next:o=>{this.modalMessage=o,this.openCloseInfoModal()}})})}submitTag(){this.validatedForm=!0,this.postTagForm.dirty&&this.postTagForm.valid&&this.onPostTag()}openCloseInfoModal(){this.visible=!this.visible,this.visible||this.resetForm()}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.postTagForm=this.formBuilder.group({name:["",i.kI.required]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.i),e.Y36(i.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-post-tag"]],decls:26,vars:8,consts:[["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","4"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","required","","type","text"],[3,"valid"],[1,"row"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Crear etiqueta"),e.qZA(),e.TgZ(2,"form",0),e.NdJ("ngSubmit",function(){return o.submitTag()}),e.TgZ(3,"c-row")(4,"c-col",1)(5,"label",2),e._uU(6,"Nombre de la etiqueta"),e.qZA(),e._UZ(7,"input",3),e.TgZ(8,"c-form-feedback",4),e._uU(9,"Nombre de etiqueta v\xe1lido"),e.qZA(),e.TgZ(10,"c-form-feedback",4),e._uU(11,"Ingrese el nombre de etiqueta"),e.qZA()()(),e.TgZ(12,"c-row",5)(13,"c-col",1)(14,"button",6),e._uU(15," Crear "),e.qZA()()()(),e.TgZ(16,"c-modal",7),e.NdJ("visibleChange",function(d){return o.handleInfoModalChange(d)}),e.TgZ(17,"c-modal-header")(18,"h5",8),e._uU(19),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return o.openCloseInfoModal()}),e.qZA()(),e.TgZ(21,"c-modal-body"),e._uU(22),e.qZA(),e.TgZ(23,"c-modal-footer")(24,"button",10),e.NdJ("click",function(){return o.openCloseInfoModal()}),e._uU(25," Cerrar "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",o.getPostTagForm())("validated",o.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.Oqu(o.modalMessage))},dependencies:[a.iok,a.Yp0,a.$_X,a.oHf,a.dCl,a.eFW,a.Hq3,a.PFQ,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),n})(),I=(()=>{class n{constructor(t,o,r,d){this.activatedRoute=t,this.TagsService=o,this.formBuilder=r,this.router=d,this.updateTagForm=new i.cw({}),this.validatedForm=!1,this.updatedTag={id:-1,name:""},this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1,this.tagId=-1,this.updateTagForm=new i.cw({name:new i.NI("",i.kI.required)})}getUpdateTagForm(){return this.updateTagForm}ngOnInit(){this.updateTagForm=this.formBuilder.group({name:["",i.kI.required]}),this.activatedRoute.queryParams.subscribe(t=>{this.tagId=t.tag,this.TagsService.getTag(this.tagId).subscribe(o=>{this.updateTagForm.setValue({name:o.name})})})}onUpdateTag(){const t=+this.tagId;this.updatedTag.id=t,this.updatedTag.name=this.updateTagForm.value.name,this.TagsService.putTag(t,this.updatedTag).subscribe({error:o=>{this.error=!0,this.modalMessage=o.error.replace(/['"]+/g,""),this.openCloseInfoModal(),this.resetForm()},next:o=>{this.error=!1,this.modalMessage=o,this.openCloseInfoModal()}})}updateTag(){this.validatedForm=!0,this.updateTagForm.dirty&&this.updateTagForm.valid&&this.onUpdateTag()}openCloseInfoModal(){this.visible=!this.visible,this.visible||this.resetForm(),!this.visible&&!this.error&&this.router.navigate(["/tags"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.updateTagForm=this.formBuilder.group({name:["",i.kI.required]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gz),e.Y36(c.i),e.Y36(i.qu),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-tag"]],decls:26,vars:8,consts:[["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","4"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","required","","type","text"],[3,"valid"],[1,"row"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Editar etiqueta"),e.qZA(),e.TgZ(2,"form",0),e.NdJ("ngSubmit",function(){return o.updateTag()}),e.TgZ(3,"c-row")(4,"c-col",1)(5,"label",2),e._uU(6,"Nombre de la etiqueta"),e.qZA(),e._UZ(7,"input",3),e.TgZ(8,"c-form-feedback",4),e._uU(9,"Nombre de etiqueta v\xe1lido"),e.qZA(),e.TgZ(10,"c-form-feedback",4),e._uU(11,"Ingrese el nombre de etiqueta"),e.qZA()()(),e.TgZ(12,"c-row",5)(13,"c-col",1)(14,"button",6),e._uU(15," Editar "),e.qZA()()()(),e.TgZ(16,"c-modal",7),e.NdJ("visibleChange",function(d){return o.handleInfoModalChange(d)}),e.TgZ(17,"c-modal-header")(18,"h5",8),e._uU(19),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return o.openCloseInfoModal()}),e.qZA()(),e.TgZ(21,"c-modal-body"),e._uU(22),e.qZA(),e.TgZ(23,"c-modal-footer")(24,"button",10),e.NdJ("click",function(){return o.openCloseInfoModal()}),e._uU(25," Cerrar "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",o.getUpdateTagForm())("validated",o.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("visible",o.visible)("alignment","center"),e.xp6(3),e.Oqu(o.modalTitle),e.xp6(3),e.Oqu(o.modalMessage))},dependencies:[a.iok,a.Yp0,a.$_X,a.oHf,a.dCl,a.eFW,a.Hq3,a.PFQ,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,a.KF4,a.YI7,a.Rbl,a.vPP,a.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),n})();var m=l(2993);const w=[{path:"",redirectTo:"get",pathMatch:"full"},{path:"",data:{title:"Etiquetas"},children:[{path:"",pathMatch:"full",redirectTo:"colors"},{path:"post",component:F,data:{title:"Crear etiqueta",usuario:"administrador"},canActivate:[m.a]},{path:"update",component:I,data:{title:"Actualizar etiqueta",usuario:"administrador"},canActivate:[m.a]},{path:"get",component:q,data:{title:"Etiquetas",usuario:"administrador"},canActivate:[m.a]}]}];let U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(w),g.Bz]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,U,a.dTQ,a.zE6,a.gzQ,h.QX,a.dGk,a.P4_,a.ejP,a.hJ1,i.u5,i.UX,a.ga2,a.kWm,a.m81,a.Xo8,a.zkK]}),n})()}}]);
"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[447],{7447:(w,p,l)=>{l.r(p),l.d(p,{TagsModule:()=>A});var u=l(6895),h=l(1334),i=l(433),o=l(7911),g=l(593),e=l(1571),c=l(623),T=l(7185);function f(n,s){1&n&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"span",8),e._uU(3,"Cargando etiquetas..."),e.qZA()())}const v=function(){return["/tags/update"]},_=function(n){return{tag:n}};function b(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"c-col",10)(1,"c-card",11)(2,"c-card-body")(3,"h5",12),e._uU(4),e.qZA(),e.TgZ(5,"c-row")(6,"c-col",13)(7,"a",14),e._uU(8,"Editar"),e.qZA(),e.TgZ(9,"button",15),e.NdJ("click",function(){const d=e.CHM(t).$implicit,U=e.oxw(2);return e.KtG(U.deleteTag(d.id))}),e._uU(10,"Eliminar"),e.qZA()()()()()()}if(2&n){const t=s.$implicit;e.Q6J("sm",3),e.xp6(4),e.Oqu(t.name),e.xp6(3),e.Q6J("routerLink",e.DdM(4,v))("queryParams",e.VKq(5,_,t.id))}}function C(n,s){if(1&n&&(e.TgZ(0,"div")(1,"c-row"),e.YNc(2,b,11,7,"c-col",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.tags)}}let M=(()=>{class n{constructor(t,a){this.tagsService=t,this.toastr=a,this.tags=new Array,this.showSpinner=!0,this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1}ngOnInit(){this.tagsService.getTags().subscribe({error:t=>{this.modalMessage=t.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:t=>{this.showSpinner=!1,0==t.length&&(this.modalMessage="A\xfan no hay etiquetas.",this.openCloseInfoModal()),this.tags=t}})}deleteTag(t){this.tagsService.deleteTag(t).subscribe({error:a=>{this.modalMessage=a.error.replace(/['"]+/g,""),this.openCloseInfoModal()},next:()=>{this.toastr.success("La etiqueta se elimin\xf3 correctamente","\xc9xito"),setTimeout(()=>{location.reload()},3e3)}})}openCloseInfoModal(){this.visible=!this.visible}handleInfoModalChange(t){this.visible=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.i),e.Y36(T._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-get-tags"]],decls:12,vars:6,consts:[["class","fade show spinner",4,"ngIf"],[4,"ngIf"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],[1,"fade","show","spinner"],[1,"spinner-grow","spinner-grow-sm"],[1,"m-1"],[3,"sm",4,"ngFor","ngForOf"],[3,"sm"],[1,"mb-4"],["cCardTitle",""],[1,"text-end","mb-12"],["cButton","","color","info","size","sm",1,"update-button",3,"routerLink","queryParams"],["cButton","","color","danger","size","sm",3,"click"]],template:function(t,a){1&t&&(e.YNc(0,f,4,0,"div",0),e.YNc(1,C,3,1,"div",1),e.TgZ(2,"c-modal",2),e.NdJ("visibleChange",function(d){return a.handleInfoModalChange(d)}),e.TgZ(3,"c-modal-header")(4,"h5",3),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return a.openCloseInfoModal()}),e.qZA()(),e.TgZ(7,"c-modal-body"),e._uU(8),e.qZA(),e.TgZ(9,"c-modal-footer")(10,"button",5),e.NdJ("click",function(){return a.openCloseInfoModal()}),e._uU(11," Cerrar "),e.qZA()()()),2&t&&(e.Q6J("ngIf",a.showSpinner),e.xp6(1),e.Q6J("ngIf",0==a.showSpinner),e.xp6(1),e.Q6J("visible",a.visible)("alignment","center"),e.xp6(3),e.Oqu(a.modalTitle),e.xp6(3),e.Oqu(a.modalMessage))},dependencies:[u.sg,u.O5,g.rH,o.AkF,o.yue,o.qkm,o.iok,o.Yp0,o.Hq3,o.PFQ,o.KF4,o.YI7,o.Rbl,o.vPP,o.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{margin-right:5%}"]}),n})(),Z=(()=>{class n{constructor(t,a){this.TagsService=t,this.formBuilder=a,this.postTagForm=new i.cw({}),this.validatedForm=!1,this.newTag={id:-1,name:""},this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1}getPostTagForm(){return this.postTagForm}ngOnInit(){this.postTagForm=this.formBuilder.group({name:["",i.kI.required]})}onPostTag(){this.TagsService.getMaxId().subscribe(t=>{this.newTag.id=t+1,this.newTag.name=this.postTagForm.value.name,this.TagsService.postTag(this.newTag).subscribe({error:a=>{this.modalMessage=a.error.replace(/['"]+/g,""),this.openCloseInfoModal(),this.resetForm()},next:a=>{this.modalMessage=a,this.openCloseInfoModal()}})})}submitTag(){this.validatedForm=!0,this.postTagForm.dirty&&this.postTagForm.valid&&this.onPostTag()}openCloseInfoModal(){this.visible=!this.visible,this.visible||this.resetForm()}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.postTagForm=this.formBuilder.group({name:["",i.kI.required]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.i),e.Y36(i.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-post-tag"]],decls:26,vars:8,consts:[["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","4"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","required","","type","text"],[3,"valid"],[1,"row"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Crear etiqueta"),e.qZA(),e.TgZ(2,"form",0),e.NdJ("ngSubmit",function(){return a.submitTag()}),e.TgZ(3,"c-row")(4,"c-col",1)(5,"label",2),e._uU(6,"Nombre de la etiqueta"),e.qZA(),e._UZ(7,"input",3),e.TgZ(8,"c-form-feedback",4),e._uU(9,"Nombre de etiqueta v\xe1lido"),e.qZA(),e.TgZ(10,"c-form-feedback",4),e._uU(11,"Ingrese el nombre de etiqueta"),e.qZA()()(),e.TgZ(12,"c-row",5)(13,"c-col",1)(14,"button",6),e._uU(15," Crear "),e.qZA()()()(),e.TgZ(16,"c-modal",7),e.NdJ("visibleChange",function(d){return a.handleInfoModalChange(d)}),e.TgZ(17,"c-modal-header")(18,"h5",8),e._uU(19),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return a.openCloseInfoModal()}),e.qZA()(),e.TgZ(21,"c-modal-body"),e._uU(22),e.qZA(),e.TgZ(23,"c-modal-footer")(24,"button",10),e.NdJ("click",function(){return a.openCloseInfoModal()}),e._uU(25," Cerrar "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",a.getPostTagForm())("validated",a.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("visible",a.visible)("alignment","center"),e.xp6(3),e.Oqu(a.modalTitle),e.xp6(3),e.Oqu(a.modalMessage))},dependencies:[o.iok,o.Yp0,o.$_X,o.oHf,o.dCl,o.eFW,o.Hq3,o.PFQ,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,o.KF4,o.YI7,o.Rbl,o.vPP,o.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),n})(),F=(()=>{class n{constructor(t,a,r,d){this.activatedRoute=t,this.TagsService=a,this.formBuilder=r,this.router=d,this.updateTagForm=new i.cw({}),this.validatedForm=!1,this.updatedTag={id:-1,name:""},this.modalMessage="",this.modalTitle="Atenci\xf3n",this.visible=!1,this.error=!1,this.tagId=-1,this.updateTagForm=new i.cw({name:new i.NI("",i.kI.required)})}getUpdateTagForm(){return this.updateTagForm}ngOnInit(){this.updateTagForm=this.formBuilder.group({name:["",i.kI.required]}),this.activatedRoute.queryParams.subscribe(t=>{this.tagId=t.tag,this.TagsService.getTag(this.tagId).subscribe(a=>{this.updateTagForm.setValue({name:a.name})})})}onUpdateTag(){const t=+this.tagId;this.updatedTag.id=t,this.updatedTag.name=this.updateTagForm.value.name,this.TagsService.putTag(t,this.updatedTag).subscribe({error:a=>{this.error=!0,this.modalMessage=a.error.replace(/['"]+/g,""),this.openCloseInfoModal(),this.resetForm()},next:a=>{this.error=!1,this.modalMessage=a,this.openCloseInfoModal()}})}updateTag(){this.validatedForm=!0,this.updateTagForm.dirty&&this.updateTagForm.valid&&this.onUpdateTag()}openCloseInfoModal(){this.visible=!this.visible,this.visible||this.resetForm(),!this.visible&&!this.error&&this.router.navigate(["/tags"])}handleInfoModalChange(t){this.visible=t}resetForm(){this.validatedForm=!1,this.updateTagForm=this.formBuilder.group({name:["",i.kI.required]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gz),e.Y36(c.i),e.Y36(i.qu),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-tag"]],decls:26,vars:8,consts:[["cForm","",1,"row","g-3","needs-validation",3,"formGroup","validated","ngSubmit"],["md","4"],["cLabel","","for","name"],["cFormControl","","id","name","formControlName","name","required","","type","text"],[3,"valid"],[1,"row"],["cButton","","color","primary","type","submit",1,"update-button","row-margin-bottom"],["id","infoModal",3,"visible","alignment","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Editar etiqueta"),e.qZA(),e.TgZ(2,"form",0),e.NdJ("ngSubmit",function(){return a.updateTag()}),e.TgZ(3,"c-row")(4,"c-col",1)(5,"label",2),e._uU(6,"Nombre de la etiqueta"),e.qZA(),e._UZ(7,"input",3),e.TgZ(8,"c-form-feedback",4),e._uU(9,"Nombre de etiqueta v\xe1lido"),e.qZA(),e.TgZ(10,"c-form-feedback",4),e._uU(11,"Ingrese el nombre de etiqueta"),e.qZA()()(),e.TgZ(12,"c-row",5)(13,"c-col",1)(14,"button",6),e._uU(15," Editar "),e.qZA()()()(),e.TgZ(16,"c-modal",7),e.NdJ("visibleChange",function(d){return a.handleInfoModalChange(d)}),e.TgZ(17,"c-modal-header")(18,"h5",8),e._uU(19),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return a.openCloseInfoModal()}),e.qZA()(),e.TgZ(21,"c-modal-body"),e._uU(22),e.qZA(),e.TgZ(23,"c-modal-footer")(24,"button",10),e.NdJ("click",function(){return a.openCloseInfoModal()}),e._uU(25," Cerrar "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",a.getUpdateTagForm())("validated",a.validatedForm),e.xp6(6),e.Q6J("valid",!0),e.xp6(2),e.Q6J("valid",!1),e.xp6(6),e.Q6J("visible",a.visible)("alignment","center"),e.xp6(3),e.Oqu(a.modalTitle),e.xp6(3),e.Oqu(a.modalMessage))},dependencies:[o.iok,o.Yp0,o.$_X,o.oHf,o.dCl,o.eFW,o.Hq3,o.PFQ,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,o.KF4,o.YI7,o.Rbl,o.vPP,o.zS7],styles:[".spinner[_ngcontent-%COMP%]{text-align:center;padding-top:33.3333333333vh;height:50vh}.update-button[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-top:2%}.row-margin-bottom[_ngcontent-%COMP%]{margin-bottom:10%}"]}),n})();var m=l(2993);const q=[{path:"",redirectTo:"get",pathMatch:"full"},{path:"",data:{title:"Etiquetas"},children:[{path:"",pathMatch:"full",redirectTo:"colors"},{path:"post",component:Z,data:{title:"Crear etiqueta",usuario:"administrador"},canActivate:[m.a]},{path:"update",component:F,data:{title:"Actualizar etiqueta",usuario:"administrador"},canActivate:[m.a]},{path:"get",component:M,data:{title:"Etiquetas",usuario:"administrador"},canActivate:[m.a]}]}];let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(q),g.Bz]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,I,o.dTQ,o.zE6,o.gzQ,h.QX,o.dGk,o.P4_,o.ejP,o.hJ1,i.u5,i.UX,o.ga2,o.kWm,o.m81,o.Xo8,o.zkK]}),n})()}}]);